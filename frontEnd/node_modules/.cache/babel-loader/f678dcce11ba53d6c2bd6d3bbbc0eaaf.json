{"ast":null,"code":"import _classCallCheck from \"/home/cdz/Code/FrontEnd/algorithm-visualization-for-Mr-Huang/frontEnd/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/cdz/Code/FrontEnd/algorithm-visualization-for-Mr-Huang/frontEnd/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/cdz/Code/FrontEnd/algorithm-visualization-for-Mr-Huang/frontEnd/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/cdz/Code/FrontEnd/algorithm-visualization-for-Mr-Huang/frontEnd/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/cdz/Code/FrontEnd/algorithm-visualization-for-Mr-Huang/frontEnd/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/cdz/Code/FrontEnd/algorithm-visualization-for-Mr-Huang/frontEnd/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/cdz/Code/FrontEnd/algorithm-visualization-for-Mr-Huang/frontEnd/src/app/component/GraphTable.js\";\nimport eventProxy from \"../eventProxy.js\";\n\nvar React = require('react'); //let node = [], link = [];  用不上\n//let selectLink;\n//关于显示代码：此组件作为消息订阅者!\n\n\nvar GraphTable =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(GraphTable, _React$Component);\n\n  function GraphTable(props) {\n    var _this;\n\n    _classCallCheck(this, GraphTable);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GraphTable).call(this, props));\n    _this.state = {\n      tab: 1,\n      code: ''\n    };\n    _this.SELECTED_LINK_COLOR = \"#ff0000\";\n    _this.DEFAULT_LINK_COLOR = \"#3a6bdb\";\n    _this.onShowCode = _this.onShowCode.bind(_assertThisInitialized(_assertThisInitialized(_this))); //绑定消息监听函数\n\n    return _this;\n  }\n\n  _createClass(GraphTable, [{\n    key: \"render\",\n    value: function render() {\n      var content = this.setContent(this.props); //props继承自panel，而panel的props来自App\n\n      return React.createElement(\"div\", {\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"tab\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tab === 1 ? \"#999\" : \"#CCC\"\n        },\n        onClick: this.setPTab.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28\n        },\n        __self: this\n      }, \"\\u9876\\u70B9\"), React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tab === 2 ? \"#999\" : \"#CCC\"\n        },\n        onClick: this.setLTab.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, \"\\u8FB9\"), React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tab === 3 ? \"#999\" : \"#CCC\"\n        },\n        onClick: this.setMatrixTab.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      }, \"\\u77E9\\u9635\"), React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tab === 4 ? \"#999\" : \"#CCC\"\n        },\n        onClick: this.setCodeTab.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, \"\\u4EE3\\u7801\")), React.createElement(\"div\", {\n        id: \"tabContent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }, content));\n    } ///当GraphSVG组件传递代码过来时，调整tab状态，使其处于代码显示栏，同时更新代码\n\n  }, {\n    key: \"onShowCode\",\n    value: function onShowCode(code) {\n      this.setState({\n        tab: 4\n      });\n      this.setState({\n        code: code\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      eventProxy.on(window.showCode, this.onShowCode); //window.showCode见index.js\n    } //点击“顶点”\n\n  }, {\n    key: \"setPTab\",\n    value: function setPTab() {\n      this.setState({\n        tab: 1\n      });\n    } //点击“边”\n\n  }, {\n    key: \"setLTab\",\n    value: function setLTab() {\n      this.setState({\n        tab: 2\n      });\n    } //点击\"矩阵\"\n\n  }, {\n    key: \"setMatrixTab\",\n    value: function setMatrixTab() {\n      this.setState({\n        tab: 3\n      });\n    } //点击“代码”\n\n  }, {\n    key: \"setCodeTab\",\n    value: function setCodeTab() {\n      this.setState({\n        tab: 4\n      });\n    } //点击菜单后渲染\n\n  }, {\n    key: \"setContent\",\n    value: function setContent(_ref) {\n      var node = _ref.node,\n          link = _ref.link;\n\n      switch (this.state.tab) {\n        case 1:\n          //顶点\n          return this.renderPoint(node);\n          break;\n\n        case 2:\n          //边\n          return this.renderLink(link);\n          break;\n\n        case 3:\n          return this.renderMatrix();\n          break;\n\n        case 4:\n          return this.renderCode();\n          break;\n      }\n\n      return \"ERROR\";\n    }\n  }, {\n    key: \"renderPoint\",\n    value: function renderPoint(nodes) {\n      var td = nodes.map(function (node) {\n        return React.createElement(\"tr\", {\n          key: node.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, node.name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, node.lng), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, node.lat));\n      });\n      return React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"\\u5730\\u70B9\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"\\u7ECF\\u5EA6\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"\\u7EAC\\u5EA6\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, td));\n    }\n  }, {\n    key: \"renderLink\",\n    value: function renderLink(links) {\n      var _this2 = this;\n\n      //index应该是link元素在links中的索引\n      var td = links.map(function (link, index) {\n        var ifVisible = link.polyline.isVisible();\n        var color = link.polyline.getStrokeColor();\n        var ifHighlight = color === _this2.SELECTED_LINK_COLOR;\n        return React.createElement(\"tr\", {\n          key: link + \"-\" + index,\n          onClick: _this2.highlightLink(link).bind(_this2),\n          style: {\n            backgroundColor: ifHighlight ? \"#DDD\" : \"#FFF\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, link.node1.name + \" -> \" + link.node2.name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, link.dis), React.createElement(\"td\", {\n          onClick: _this2.setLink(link).bind(_this2),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, ifVisible ? \"Yes\" : \"No\"));\n      });\n      return React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"\\u8DEF\\u7EBF\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"\\u8DDD\\u79BB\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"\\u9009\\u62E9\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, td));\n    }\n  }, {\n    key: \"renderMatrix\",\n    value: function renderMatrix() {\n      return React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"renderCode\",\n    value: function renderCode() {\n      //渲染代码，使用layer  (iframe高度无法使用相对高度，应为tabContent的限制)\n      return React.createElement(\"textarea\", {\n        cols: \"80\",\n        rows: \"30\",\n        value: this.state.code,\n        autoFocus: true,\n        readOnly: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"highlightLink\",\n    value: function highlightLink(link) {\n      return function (event) {\n        var _this3 = this;\n\n        var links = this.props.link;\n        links.forEach(function (l) {\n          l.polyline.setStrokeColor(_this3.DEFAULT_LINK_COLOR);\n        });\n        link.polyline.setStrokeColor(this.SELECTED_LINK_COLOR);\n        this.props.updateState(null, links);\n      };\n    }\n  }, {\n    key: \"setLink\",\n    value: function setLink(link) {\n      return function (event) {\n        var links = this.props.link;\n        var visible = link.polyline.isVisible();\n        if (visible) link.polyline.hide();else link.polyline.show();\n        this.props.updateState(null, links);\n      };\n    }\n  }]);\n\n  return GraphTable;\n}(React.Component);\n\nexport default GraphTable;","map":{"version":3,"sources":["/home/cdz/Code/FrontEnd/algorithm-visualization-for-Mr-Huang/frontEnd/src/app/component/GraphTable.js"],"names":["eventProxy","React","require","GraphTable","props","state","tab","code","SELECTED_LINK_COLOR","DEFAULT_LINK_COLOR","onShowCode","bind","content","setContent","width","height","backgroundColor","setPTab","setLTab","setMatrixTab","setCodeTab","setState","on","window","showCode","node","link","renderPoint","renderLink","renderMatrix","renderCode","nodes","td","map","name","lng","lat","links","index","ifVisible","polyline","isVisible","color","getStrokeColor","ifHighlight","highlightLink","node1","node2","dis","setLink","event","forEach","l","setStrokeColor","updateState","visible","hide","show","Component"],"mappings":"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","sourcesContent":["import eventProxy from \"../eventProxy.js\"\nlet React = require('react');\n\n\n//let node = [], link = [];  用不上\n//let selectLink;\n\n\n\n//关于显示代码：此组件作为消息订阅者!\nclass GraphTable extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            tab: 1,\n            code:''\n        };\n        this.SELECTED_LINK_COLOR = \"#ff0000\";\n        this.DEFAULT_LINK_COLOR = \"#3a6bdb\";\n        this.onShowCode=this.onShowCode.bind(this);  //绑定消息监听函数\n    }\n   \n    render(){\n        let content = this.setContent(this.props); //props继承自panel，而panel的props来自App\n        return ( \n            <div style={{width: '100%', height:'100%'}}>\n                <div id=\"tab\">\n                    <div style={{backgroundColor:this.state.tab===1?\"#999\":\"#CCC\"}} onClick={this.setPTab.bind(this)}>顶点</div>\n                    <div style={{backgroundColor:this.state.tab===2?\"#999\":\"#CCC\"}} onClick={this.setLTab.bind(this)}>边</div>\n                    <div style={{backgroundColor:this.state.tab===3?\"#999\":\"#CCC\"}} onClick={this.setMatrixTab.bind(this)}>矩阵</div>\n                    <div style={{backgroundColor:this.state.tab===4?\"#999\":\"#CCC\"}} onClick={this.setCodeTab.bind(this)}>代码</div>\n                   \n                </div>\n                <div id=\"tabContent\">{content}</div>\n            </div>\n        );\n    }\n\n    ///当GraphSVG组件传递代码过来时，调整tab状态，使其处于代码显示栏，同时更新代码\n    onShowCode(code){  \n        this.setState({tab:4});\n        this.setState({code:code});\n    }\n\n    componentDidMount(){\n        eventProxy.on(window.showCode,this.onShowCode);  //window.showCode见index.js\n    }\n\n    //点击“顶点”\n    setPTab(){\n        this.setState({\n            tab: 1\n        });\n    }\n    //点击“边”\n    setLTab(){\n        this.setState({\n            tab: 2\n        });\n    }\n\n    //点击\"矩阵\"\n    setMatrixTab()\n    {\n        this.setState({\n            tab:3\n        });\n    }\n\n    //点击“代码”\n    setCodeTab(){\n        this.setState({\n            tab:4\n        });\n    }\n\n    \n\n    //点击菜单后渲染\n    setContent( {node, link} ){\n        switch(this.state.tab){\n            case 1:\n                //顶点\n                return this.renderPoint(node);\n                break;\n            case 2:\n                //边\n                return this.renderLink(link);\n                break;\n            case 3:\n                return this.renderMatrix();\n                break;\n            case 4:\n                return this.renderCode();\n                break;\n        }\n        return \"ERROR\";\n    }\n    renderPoint(nodes){\n        let td = nodes.map(node=>{\n            return (\n                <tr key={node.name}>\n                    <td>{node.name}</td>\n                    <td>{node.lng}</td>\n                    <td>{node.lat}</td>\n                </tr>\n            );\n        });\n        return (\n            <table>\n                <thead>\n                    <tr>\n                        <th>地点</th>\n                        <th>经度</th>\n                        <th>纬度</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {td}\n                </tbody>\n            </table>\n        );\n    }\n    renderLink(links){     //index应该是link元素在links中的索引\n        let td = links.map((link, index)=>{\n            let ifVisible = link.polyline.isVisible();\n            let color = link.polyline.getStrokeColor();\n            let ifHighlight = color === this.SELECTED_LINK_COLOR;\n\n            return (\n                <tr key={link+\"-\"+index} onClick={this.highlightLink(link).bind(this)} style={{backgroundColor:ifHighlight?\"#DDD\":\"#FFF\"}}>\n                    <td>{link.node1.name+\" -> \"+link.node2.name}</td>\n                    <td>{link.dis}</td>\n                    <td onClick={this.setLink(link).bind(this)}>{ifVisible?\"Yes\":\"No\"}</td>\n                </tr>\n            );\n        });\n\n        return (\n            <table>\n                <thead>\n                    <tr>\n                        <th>路线</th>\n                        <th>距离</th>\n                        <th>选择</th>\n                    </tr> \n                </thead>\n                <tbody>\n                    {td}\n                </tbody>\n            </table>\n        );\n    }\n   \n\n    renderMatrix()\n    {\n        return(\n            <table>\n              \n            </table>\n        );\n    }\n\n    renderCode(){     //渲染代码，使用layer  (iframe高度无法使用相对高度，应为tabContent的限制)\n        return(\n            <textarea   cols=\"80\" rows=\"30\" value={this.state.code} autoFocus readOnly></textarea>\n        );\n    }\n   \n\n    highlightLink(link){\n        return function(event){\n            let links = this.props.link;\n            links.forEach(l=>{\n                l.polyline.setStrokeColor(this.DEFAULT_LINK_COLOR);\n            });\n            link.polyline.setStrokeColor(this.SELECTED_LINK_COLOR);\n            this.props.updateState(null, links);\n        }\n    }\n\n    setLink(link){\n        return function(event){\n            let links = this.props.link;\n            let visible = link.polyline.isVisible();\n\n            if(visible)link.polyline.hide();\n            else link.polyline.show();\n\n            this.props.updateState(null, links);\n        }\n    }\n}\n\nexport default GraphTable;"]},"metadata":{},"sourceType":"module"}