{"ast":null,"code":"import _defineProperty from \"/home/cdz/Code/FrontEnd/nw-react/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/cdz/Code/FrontEnd/nw-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/cdz/Code/FrontEnd/nw-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/cdz/Code/FrontEnd/nw-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/cdz/Code/FrontEnd/nw-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/cdz/Code/FrontEnd/nw-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/cdz/Code/FrontEnd/nw-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/cdz/Code/FrontEnd/nw-react/src/app/component/GraphSVG.js\";\n//import d3 from './d3.v4.min.js';\n//window.d3 = d3;\n//import $ from 'jquery';  //引入jquery\nimport Graph from \"./Graph.js\";\nimport MyMenu from \"../MyMenu.js\";\nimport { assertFunctionParent } from \"babel-types\";\n\nrequire('../../assets/play.png');\n\nrequire('../../assets/pause.png');\n\nvar React = require('react'); //readme: 学长的代码中node的改变是通过state.S_NODE实现，edge(颜色)的改变是通过this.props.link实现!!!!!\n//经补充修改后，边上路径长度的改变通过state.S_EDGE实现\n//import stepData from \"./testData.js\";\n\n\nvar $ = window.jQuery;\nvar stepData = null;\nvar _name = []; //存储点名\n//let STEP_COUNT = 0;　　　//学长以STEP_COUNT记录每一个动作的编号（是动作不是帧！！）->改为每一帧的编号\n\nvar actionStep = new Object(); //采用对象，是为了进行action_count的引用传递\n\nactionStep.STEP_COUNT = 1; //帧从１开始计数（只是为了符合动作表的第四个字段）\n\nactionStep.ACTION_COUNT = 0;\nwindow.question = true;\n\nvar GraphSVG =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(GraphSVG, _React$Component);\n\n  //其属性来自Panel...this.pros的传递,包括updtaState、node、link\n  function GraphSVG(props) {\n    var _this;\n\n    _classCallCheck(this, GraphSVG);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GraphSVG).call(this, props));\n    _this.state = {}; //注意：关于点、边的颜色\n    //ＤＦＳ后台传递的颜色：初始化边表示（１０，１０，１０），初始点表示(91,155,2１3),选中点边表示（255,0,0）\n    //DJ后台传递颜色:初始化边（１０，１０，１０），初始化点（９１，１５５，２１３），\n\n    _this.DEFAULT_LINK_COLOR = \"#3a6bdb\"; //默认是(浅蓝色)\n\n    _this.INITIAL_LINK_COLOR = \"#0a0a0a\"; //初始化后边的颜色\n\n    _this.INITIAL_NODE_COLOR = \"#5B9BD5\"; //初始化后点的颜色\n\n    _this.SELECTED_LINK_COLOR = \"#ff0000\"; //选中的边，红色\n\n    _this.SELECTED_NODE_COLOR = \"#ff0000\"; //选中的点     \n\n    _this.path = null;\n    _this.state.speed = 0.5;\n    _this.state.play = \"stop\";\n    _this.state.start = \"\";\n    _this.state.end = \"\";\n    _this.state.S_NODE = new Map(); //更新点的颜色;　　　　　　　　　Map是一组键值对的结构，具有极快的查找速度(误以为是Map.js导出的Map类)\n\n    _this.state.S_EDGE = new Map(); //更新边的距离\n\n    _this.state.question = true;\n    _this.state.S_NODE_DIS = new Map(); //更新点到起点的距离\n\n    _this.state.S_NODE_INFO = new Map(); //更新点旁边的其他信息，如显示不等式\n\n    return _this;\n  }\n\n  _createClass(GraphSVG, [{\n    key: \"render\",\n    value: function render() {\n      this.clcMaxMin();\n      var nodes = this.renderNode();\n      var links = this.renderLink();\n      var controlstate = this.state.play === \"play\" ? \"pauseState\" : \"playState\";\n      return React.createElement(\"div\", {\n        id: \"graphWrap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#FFF\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        ref: \"graph\",\n        width: \"100%\",\n        height: \"100%\",\n        version: \"1.1\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        onContextMenu: function onContextMenu(e) {\n          e.preventDefault();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, links, nodes))), React.createElement(\"div\", {\n        id: \"tool\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \" \\u63D0\\u95EE \", React.createElement(\"input\", {\n        id: \"question_checkbox\",\n        type: \"checkbox\",\n        checked: this.state.question,\n        onChange: this.checkChange.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }), \" \"), React.createElement(\"div\", {\n        id: \"speed\",\n        title: \"\\u901F\\u5EA6\",\n        onClick: this.changeSpeed.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"speedValue\",\n        style: {\n          width: this.state.speed * 100 + \"%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"prev\",\n        title: \"\\u4E0A\\u4E00\\u6B65\",\n        onClick: this.animate_stepback.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"start\",\n        title: \"\\u5F00\\u59CB/\\u6682\\u505C\",\n        className: controlstate,\n        onClick: this.play.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"next\",\n        title: \"\\u4E0B\\u4E00\\u6B65\",\n        onClick: this.animate_stepforward.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"end\",\n        title: \"\\u7ED3\\u675F\",\n        onClick: this.stop.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      })));\n    } //是否提问状态改变\n\n  }, {\n    key: \"checkChange\",\n    value: function checkChange(e) {\n      window.question = e.target.checked;\n      console.log(window.question);\n      this.setState({\n        question: !this.state.question\n      });\n    }\n  }, {\n    key: \"clcMaxMin\",\n    value: function clcMaxMin() {\n      var _this2 = this;\n\n      var max_lng = -Infinity,\n          min_lng = Infinity;\n      var max_lat = -Infinity,\n          min_lat = Infinity;\n      this.mid_lng = 0;\n      this.mid_lat = 0;\n      this.props.node.forEach(function (node) {\n        if (node.lat > max_lat) max_lat = node.lat;\n        if (node.lat < min_lat) min_lat = node.lat;\n        if (node.lng > max_lng) max_lng = node.lng;\n        if (node.lng < min_lng) min_lng = node.lng;\n        _this2.mid_lng += node.lng;\n        _this2.mid_lat += node.lat;\n      });\n      this.max_lng = max_lng;\n      this.min_lng = min_lng;\n      this.max_lat = max_lat;\n      this.min_lat = min_lat;\n      this.mid_lng /= this.props.node.length;\n      this.mid_lat /= this.props.node.length;\n    }\n  }, {\n    key: \"clcCoordinate\",\n    value: function clcCoordinate(lng, lat) {\n      var w = this.refs.graph.clientWidth;\n      var h = this.refs.graph.clientHeight;\n      var margin = 50; // w = (w-margin - margin)/(this.max_lat-this.min_lat + 0.001)*(lat-this.min_lat) + margin;\n      // h = h - ( (h-margin - margin)/(this.max_lng-this.min_lng + 0.001)*(lng-this.min_lng) + margin ) ;\n\n      w = (w - margin - margin) / (this.max_lng - this.min_lng + 0.001) * (lng - this.min_lng) + margin;\n      h = h - ((h - margin - margin) / (this.max_lat - this.min_lat + 0.001) * (lat - this.min_lat) + margin);\n      return [w, h];\n    }\n  }, {\n    key: \"renderNode\",\n    value: function renderNode() {\n      var _this3 = this;\n\n      var nodes = this.props.node;\n      var svg = nodes.map(function (node) {\n        var _this3$clcCoordinate = _this3.clcCoordinate(node.lng, node.lat),\n            _this3$clcCoordinate2 = _slicedToArray(_this3$clcCoordinate, 2),\n            x = _this3$clcCoordinate2[0],\n            y = _this3$clcCoordinate2[1];\n\n        var name = node.name;\n\n        var setSE = _this3.setSE.bind(_this3);\n\n        var color = null;\n\n        if (_this3.state.start === node.name) {\n          color = \"#CCFFFF\";\n        } else if (_this3.state.end === node.name) {\n          color = \"#CC6699\";\n        }\n\n        if (_this3.state.S_NODE.has(node.name)) {\n          color = _this3.state.S_NODE.get(node.name);\n        }\n\n        var data = {\n          name: name,\n          x: x,\n          y: y,\n          setSE: setSE,\n          color: color\n        }; //把data作为属性传递给Node\n\n        return React.createElement(Node, Object.assign({\n          key: \"node\" + node.name\n        }, data, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        })); //Node类在此脚本末尾！\n        //react利用key来识别组件，它是一种身份标识标识,与props中的属性不同！！！\n      });\n      return svg;\n    }\n  }, {\n    key: \"renderLink\",\n    value: function renderLink() {\n      var _this4 = this;\n\n      var links = this.props.link;\n      var svg = links.map(function (link) {\n        if (!link.polyline.isVisible()) return;\n\n        var _this4$clcCoordinate = _this4.clcCoordinate(link.node1.lng, link.node1.lat),\n            _this4$clcCoordinate2 = _slicedToArray(_this4$clcCoordinate, 2),\n            x1 = _this4$clcCoordinate2[0],\n            y1 = _this4$clcCoordinate2[1];\n\n        var _this4$clcCoordinate3 = _this4.clcCoordinate(link.node2.lng, link.node2.lat),\n            _this4$clcCoordinate4 = _slicedToArray(_this4$clcCoordinate3, 2),\n            x2 = _this4$clcCoordinate4[0],\n            y2 = _this4$clcCoordinate4[1];\n\n        var s = {\n          name: link.node1.name,\n          x: x1,\n          y: y1\n        };\n        var e = {\n          name: link.node2.name,\n          x: x2,\n          y: y2\n        };\n        var color = link.polyline.getStrokeColor();\n        var dis = ''; //边的长度\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = _this4.state.S_EDGE[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var edge = _step.value;\n\n            if (link.node1.name === edge[1][0] && link.node2.name === edge[1][1] || link.node1.name === edge[1][1] && link.node2.name === edge[1][0]) {\n              dis = edge[0]; //距离赋值\n\n              break;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        console.log(color, link);\n        return React.createElement(Link, {\n          key: \"link-\" + s.name + \"-\" + e.name,\n          from: s.name,\n          to: e.name,\n          x1: s.x,\n          y1: s.y,\n          x2: e.x,\n          y2: e.y,\n          color: color,\n          distance: dis,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        });\n      });\n      return svg;\n    }\n  }, {\n    key: \"changeSpeed\",\n    value: function changeSpeed(event) {\n      var p = (event.clientX - this.getLeft(event.target)) / event.target.clientWidth;\n      console.log(p);\n      this.setState({\n        speed: p\n      });\n    }\n  }, {\n    key: \"play\",\n    value: function play(event) {\n      if (this.state.play === \"stop\") {\n        this.setState({\n          play: \"play\"\n        });\n        this.resetColor();\n        clearTimeout(window.timer);\n        this.go(); //go()包含了初始化以及animate\n      } else if (this.state.play === \"pause\") {\n        this.setState({\n          play: \"play\"\n        });\n        this.animate(); //继续执行\n      } else if (this.state.play === \"play\") {\n        this.setState({\n          play: \"pause\"\n        });\n        clearTimeout(window.timer); //暂停,取消计时器他就不再执行（但是所有状态都保存着<最重要是STEP_COUNT>，下次继续animate即可继续执行）\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      clearTimeout(window.timer);\n      actionStep.STEP_COUNT = 1; //this.setState({play: \"stop\", start: \"\", end: \"\", S_NODE:new Map(), S_EDGE: new Map()});\n\n      this.setState({\n        play: \"stop\",\n        start: \"\",\n        end: \"\",\n        S_NODE: new Map()\n      });\n      /* global layer */\n\n      layer.msg(\"结束\");\n    } //执行（包括数据传递给C++以及根据C++回传数据显示），会调用animate\n\n  }, {\n    key: \"go\",\n    value: function go() {\n      var _this5 = this;\n\n      if (!this.state.start || !this.state.end) {\n        return this.stop();\n      }\n\n      ;\n      var that = this; //this对象在程序中随时会改变，而var that=this之后，that没改变之前仍然是指向当时的this，这样就不会出现找不到原来的对象。\n\n      var edgeIn = [];\n      var pointIn = [];\n      var globalIn = [];\n      _name = []; //存储点的名字\n\n      this.props.node.forEach(function (node) {\n        //提取每个点的经度、维度、编号并存储在pointIn中(C++程序需要输入的点信息)\n        _name.push(node.name);\n\n        var lng = parseInt(node.lng);\n        var lat = parseInt(node.lat);\n        var index = '*' + (_name.length - 1) + '*';\n        pointIn.push([index, lng, lat]);\n      });\n      var start_index = '*' + _name.findIndex(function (v) {\n        return v === _this5.state.start;\n      }) + '*'; //找到起点、终点的编号\n\n      var end_index = '*' + _name.findIndex(function (v) {\n        return v === _this5.state.end;\n      }) + '*';\n      globalIn.push([pointIn.length]); //globalIn代表C++程序输入的参数：点数、？\n\n      pointIn = JSON.stringify(pointIn);\n      globalIn.push([-1000, 1000]);\n      globalIn.push([1000, -1000]);\n      globalIn = JSON.stringify(globalIn);\n      that.resetColor();\n      var S_NODE = new Map();\n      var S_EDGE = new Map();\n      this.setState({\n        S_NODE: S_NODE,\n        S_EDGE: S_EDGE\n      }); //向 setState() 中传入一个对象来对已有的 state 进行更新。\n\n      this.props.link.forEach(function (link) {\n        //整理edgeIn(编号、编号、距离),作为C++程序传入参数\n        if (!link.polyline.isVisible()) return;\n        var n1 = '*' + _name.findIndex(function (v) {\n          return v === link.node1.name;\n        }) + '*';\n        var n2 = '*' + _name.findIndex(function (v) {\n          return v === link.node2.name;\n        }) + '*';\n        edgeIn.push([n1, n2, parseFloat(link.dis, 10)]);\n      });\n      edgeIn = JSON.stringify(edgeIn); //////////////////////////////////////////////////////\n\n      window.layer.load(1, {\n        shade: [0.4, '#fff']\n      });\n      $.ajax({\n        type: \"POST\",\n        url: \"http://localhost:3001/data\",\n        data: {\n          edgeIn: edgeIn,\n          pointIn: pointIn,\n          globalIn: globalIn,\n          sName: start_index,\n          eName: end_index,\n          algo: window.algo\n        },\n        success: function success(json) {\n          //console.log(_name);\n          //console.log({start_index, end_index});\n          //console.log(json);\n          // //stepData包括code、steps\n          stepData = json; //steps的数据是各个动作的含义，比如：\tchangeNodeColor(2,RGB(255,0,0))\tAnimation\t8\n\n          layer.closeAll(); //stepData是C++计算传回的数据,根据stepData,前端做出相应动作\n          // 开始动画\n\n          that.animate(); //不能用this，因为ajax中的this已经不在代表外面的组件了!!!\n        },\n        error: function error() {\n          layer.closeAll();\n          layer.msg(\"出错, 提交失败\");\n        }\n      }); //////////////////////////////////////////////////////\n      // that.animate();\n    } //执行动画\n    //注意：当Question、showHelp、showCode时，之所以return是为了结束当前函数，不再执行当前函数末尾的animate\n    //因为在else if中会使用layer，内部接着使用了setTimeout和animate继续下去\n\n  }, {\n    key: \"animate\",\n    value: function animate() {\n      var _this6 = this;\n\n      // if(this.state.play!==\"play\")return;\n      //setTimeout(code,millisec), code是要执行的代码，lillisec是遇到setTimer后要等待多少毫秒才执行code!\n      //返回数值id，整型，可用于 取消 setTimeout 设置的函数clearTimeout(id)。也就是这个setTimeout的唯一标示符\n      window.timer = setTimeout(function () {\n        var step = _this6.getStep(actionStep); //获取一帧的全部数据\n\n\n        layer.closeAll();\n        actionStep.STEP_COUNT++;\n\n        if (step === null) {\n          _this6.stop();\n\n          return;\n        }\n\n        var links = _this6.props.link; //将要更新的元素\n\n        var S_NODE = _this6.state.S_NODE;\n        var S_EDGE = _this6.state.S_EDGE;\n\n        for (var i = 0; i < step.types.length; i++) {\n          if (step.types[i] === \"changeEdgeColor\") {\n            (function () {\n              var params = step.infos[i][1].split(\"(\")[1].split(\",\");\n              params.pop();\n              var color = step.infos[i][1].split(\"RGB\")[1];\n              color = _this6.chooseColor(color); //改变边的颜色\n\n              var name1 = _name[parseInt(params[0])];\n\n              var name2 = _name[parseInt(params[1])];\n\n              links.forEach(function (link) {\n                if (link.polyline.isVisible()) {\n                  if (link.node1.name === name1 && link.node2.name === name2 || link.node1.name === name2 && link.node2.name === name1) {\n                    link.polyline.setStrokeColor(color);\n                  }\n                }\n              }); //this.props.updateState(null, links);\n            })();\n          } else if (step.types[i] === \"changeNodeColor\") {\n            var idx = step.infos[i][1].split(\"(\")[1].split(\",\")[0];\n            idx = parseInt(idx);\n            var color = step.infos[i][1].split(\"RGB\")[1];\n            color = _this6.chooseColor(color);\n            var name = _name[idx]; //找到编号对应的点名\n\n            S_NODE.set(name, color); //S_NODE是键值对，改变name对应点的状态\n            //this.setState({S_NODE});\n          } else if (step.types[i] === \"changeEdgeLength\") {\n            //\"20\tchangeEdgeLength(0,1,1173)\tAnimation\t2\";\n            var params = step.infos[i][1].split('(')[1].split(')')[0].split(','); //获取点编号、边距离\n\n            var name1 = _name[parseInt(params[0])]; //起点编号\n\n\n            var name2 = _name[parseInt(params[1])];\n\n            var dis = parseFloat(params[2]);\n            S_EDGE.set(dis, [name1, name2]);\n          } else if (step.types[i] === \"showCode\") {\n            var y = 0;\n          } else if (step.types[i] === \"showHelp\") {\n            var z = 0;\n          } else if (step.types[i] === \"Question\") {\n            var a = 0;\n          } else if (step.types[i] === \"InequalityDisapper\") {\n            var b = 0;\n          }\n        } //对一帧中的各元素统一进行刷新\n\n\n        _this6.props.updateState(null, links);\n\n        _this6.setState({\n          S_NODE: S_NODE\n        });\n\n        _this6.setState({\n          S_EDGE: S_EDGE\n        });\n\n        _this6.animate(); //重复执行\n\n      }, this.state.speed * 1500 + 70);\n    } //学长原来是获取每一个动作信息－>此处改为获取每一个步骤(帧)的信息\n\n  }, {\n    key: \"getStep\",\n    value: function getStep(actionStep) {\n      console.log(\"get step:\" + actionStep.STEP_COUNT); //读取一帧的数据\n\n      var stepTemp = stepData.steps[actionStep.ACTION_COUNT].split('\\t')[3]; //得到帧的编号\n\n      if (stepData.steps[actionStep.ACTION_COUNT].split('\\t')[1].split('(')[0] === \"Question\") {\n        //question动作的帧编号位置不同!\n        stepTemp = stepData.steps[actionStep.ACTION_COUNT].split('\\t')[7];\n      }\n\n      var types = new Array(); //创建数组，用于保存动作信息\n\n      var infos = new Array();\n\n      while (actionStep.STEP_COUNT == stepTemp) {\n        //读取一个动作\n        console.log(\"get action: \" + actionStep.ACTION_COUNT);\n        var info = stepData.steps[actionStep.ACTION_COUNT].split('\\t'); //第ACTION_COUNT条动作信息(作为数组保存在info)                  \n\n        var type = info[1].split('(')[0]; //info[1]代表动作的解释：changeNodeColor(4,RGB(91,155,213))；  则type对应changeNodeColor\n\n        types.push(type);\n        infos.push(info);\n        actionStep.ACTION_COUNT++;\n        if (stepData.steps.length - 1 <= actionStep.ACTION_COUNT) return null; //尚不清楚为什么stepData.steps.length比实际数组长度多了1??\n\n        console.log(\"length:\" + stepData.steps.length);\n        console.log(\"action count:\" + actionStep.ACTION_COUNT);\n        stepTemp = stepData.steps[actionStep.ACTION_COUNT].split('\\t')[3]; //得到帧的编号\n\n        if (stepData.steps[actionStep.ACTION_COUNT].split('\\t')[1].split('(')[0] === \"Question\") {\n          //question动作的帧编号位置不同!\n          stepTemp = stepData.steps[actionStep.ACTION_COUNT].split('\\t')[7];\n        }\n      }\n\n      return {\n        types: types,\n        infos: infos\n      }; //返回对象，对象的属性是键值对\n    }\n  }, {\n    key: \"chooseColor\",\n    value: function chooseColor(color) {\n      switch (color) {\n        case \"(10,10,10))\":\n          return this.INITIAL_LINK_COLOR;\n        //初始化边（接近黑色）\n\n        case \"(91,155,213))\":\n          return this.INITIAL_NODE_COLOR;\n        //初始化点（接近蓝色)\n\n        case \"(255,0,0))\":\n          return this.SELECTED_LINK_COLOR;\n        //选中点、边（红色）\n\n        default:\n          return \"#000000\";\n      }\n    }\n  }, {\n    key: \"checkLink\",\n    value: function checkLink(link, name1, name2) {\n      var node1 = link.node1;\n      var node2 = link.node2;\n\n      if (node1.name === name1 && node2.name === name2 || node1.name === name2 && node2.name === name1) {\n        return true;\n      }\n\n      return false;\n    } //重置link颜色\n\n  }, {\n    key: \"resetColor\",\n    value: function resetColor() {\n      var _this7 = this;\n\n      var links = this.props.link;\n      links.forEach(function (link) {\n        if (link.polyline.isVisible()) link.polyline.setStrokeColor(_this7.DEFAULT_LINK_COLOR);\n      });\n      this.props.updateState(null, links);\n    }\n    /*获取元素的横坐标*/\n\n  }, {\n    key: \"getLeft\",\n    value: function getLeft(e) {\n      var offset = e.offsetLeft;\n\n      if (e.offsetParent != null) {\n        offset += this.getLeft(e.offsetParent);\n      }\n\n      return offset;\n    } //设置起点终点\n\n  }, {\n    key: \"setSE\",\n    value: function setSE(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var that = this;\n      var name = event.target.attributes.id.value.split(\"_\").pop();\n      /*\n      let menu = new nw.Menu();\n      menu.append(new nw.MenuItem({\n      \tlabel: '设为起点',\n      \tclick: function(){\n                    that.setState({start: name});\n      \t}\n      }));\n      menu.append(new nw.MenuItem({\n      \tlabel: '设为终点',\n      \tclick: function(){\n                    that.setState({end: name});\n      \t}\n      }));\n      menu.popup(event.clientX, event.clientY);*/\n\n      var menu = new MyMenu(\"MyMenu_Node_SVG\");\n      menu.append([{\n        label: '设为起点',\n        click: function click() {\n          that.setState({\n            start: name\n          });\n        }\n      }, {\n        label: '设为终点',\n        click: function click() {\n          that.setState({\n            end: name\n          });\n        }\n      }]);\n      menu.popup(event.clientX, event.clientY);\n      return false;\n    } //提问\n\n  }, {\n    key: \"ask\",\n    value: function ask(que, msg) {\n      clearTimeout(window.timer);\n      var that = this;\n      window.layer.prompt({\n        title: que\n      }, function (text, index) {\n        layer.closeAll();\n\n        if (text != msg) {\n          window.layer.msg('正确答案：' + msg, {\n            time: 1000\n          }); ///////////////////////////////////////////////////////\n\n          $.ajax({\n            type: \"POST\",\n            url: \"/collect\",\n            data: {\n              que: que,\n              ans: text,\n              msg: msg\n            },\n            success: function success(json) {},\n            error: function error() {}\n          }); ///////////////////////////////////////////////////////\n\n          setTimeout(function () {\n            that.animate();\n          }, 1100);\n        } else {\n          that.animate();\n        }\n      });\n    }\n  }, {\n    key: \"showCode\",\n    value: function showCode(msg) {\n      var content = \"\";\n\n      if (msg === 1) {\n        content = \"\\n        <p style=\\\"white-space:pre-wrap !important; padding: 30px;\\\">    void DFS(Graph& G, int v)\\n        {\\n            <span style=\\\"color: red\\\">visited[v] = 1;\\t</span>\\n            for (int w = FirstAdjVex(G, v); w != -1; w = NextAdjVex(G, v, w))\\n            {\\n                if (!visited[w])\\n                {\\n                    DFS(G, w);\\n                }\\n            }\\n        }</p>\\n            \";\n      } else if (msg === 2) {\n        content = \"\\n        <p style=\\\"white-space:pre-wrap !important; padding: 30px;\\\">    void DFS(Graph& G, int v)\\n        {\\n            visited[v] = 1;\\t\\n            <span style=\\\"color: red\\\">for (int w = FirstAdjVex(G, v); w != -1; w = NextAdjVex(G, v, w))\\n            {\\n                if (!visited[w])\\n                {\\n                    DFS(G, w);\\n                }\\n            }</span>\\n        }</p>\\n            \";\n      }\n\n      var that = this; //页面层\n\n      window.layer.open({\n        type: 1,\n        area: ['800px', '400px'],\n        //宽高\n        content: content,\n        closeBtn: false,\n        title: '提示',\n        btn: '关闭',\n        yes: function yes() {\n          layer.closeAll();\n          that.animate();\n        }\n      });\n    } //****************************************************dd by cdz\n    //执行动作：根据STEP_COUNT执行！！！\n    //注意：当Question、showHelp、showCode时，之所以return是为了结束当前函数，不再执行当前函数末尾的animate\n    //因为在else if中会使用layer，内部接着使用了setTimeout和animate继续下去\n\n  }, {\n    key: \"frame_animate\",\n    value: function frame_animate() {\n      var _this8 = this;\n\n      // if(this.state.play!==\"play\")return;\n      //setTimeout(code,millisec), code是要执行的代码，lillisec是遇到setTimer后要等待多少毫秒才执行code!\n      //返回数值id，整型，可用于 取消 setTimeout 设置的函数clearTimeout(id)。也就是这个setTimeout的唯一标示符\n      window.timer = setTimeout(function () {\n        var step = _this8.getStep(actionStep); //获得每一步动作的数据(从类变量stepData中获得),包括type、info\n\n\n        layer.closeAll();\n        actionStep.STEP_COUNT++;\n\n        if (step === null) {\n          _this8.stop();\n\n          return;\n        }\n\n        if (step.type === \"changeEdgeColor\") {\n          var params = step.info[1].split(\"(\")[1].split(\",\");\n          params.pop();\n          var color = step.info[1].split(\"RGB\")[1];\n          color = _this8.chooseColor(color);\n\n          _this8.changeEdgeColor(parseInt(params[0]), parseInt(params[1]), color);\n        } else if (step.type === \"changeNodeColor\") {\n          var idx = step.info[1].split(\"(\")[1].split(\",\")[0];\n          idx = parseInt(idx);\n          var _color = step.info[1].split(\"RGB\")[1];\n          _color = _this8.chooseColor(_color);\n\n          _this8.changeNodeColor(idx, _color);\n        } else if (step.type === \"Question\" && window.question) {\n          var que = step.info[2];\n          var ans = step.info[3];\n\n          if (ans[0] === \"*\") {\n            ans = ans.replace(/\\*/g, \"\");\n            ans = _name[ans];\n          }\n\n          return _this8.ask(que, ans);\n        } else if (step.type === \"showHelp\") {\n          var msg = step.info[1].split(\"(\")[1].split(\")\")[0];\n          layer.msg(msg, {\n            time: 3000\n          });\n          return setTimeout(function () {\n            _this8.animate();\n          }, 3200);\n        } else if (step.type === \"showCode\") {\n          var _msg = step.info[1].split(\"(\")[1].split(\")\")[0];\n          _msg = parseInt(_msg, 10);\n          return _this8.showCode(_msg);\n        }\n\n        _this8.animate(); //重复执行\n\n      }, this.state.speed * 1000 + 70);\n    } //倒退:为了减少不必要的理解错误，只能倒退到点和边初始化完成以后\n\n  }, {\n    key: \"animate_stepback\",\n    value: function animate_stepback() {\n      //不管处于什么状态，都使其暂停\n      this.setState({\n        play: \"pause\"\n      });\n      clearTimeout(window.timer);\n      layer.closeAll();\n      actionStep.STEP_COUNT--;\n      var back_step = this.getStep(actionStep);\n\n      if (back_step === null) {\n        this.stop();\n        return;\n      }\n\n      if (back_step.type === \"changeEdgeColor\") {\n        var params = back_step.info[1].split(\"(\")[1].split(\",\");\n        params.pop();\n        var color = back_step.info[1].split(\"RGB\")[1];\n        color = this.chooseColor(color);\n        if (color == this.SELECTED_LINK_COLOR) //只对已选中的边进行改变,变为初始化后的样子\n          this.changeEdgeColor(parseInt(params[0]), parseInt(params[1]), this.INITIAL_LINK_COLOR);\n      } else if (back_step.type === \"changeNodeColor\") {\n        var idx = back_step.info[1].split(\"(\")[1].split(\",\")[0];\n        idx = parseInt(idx);\n        var _color2 = back_step.info[1].split(\"RGB\")[1];\n        _color2 = this.chooseColor(_color2);\n        if (_color2 == this.SELECTED_NODE_COLOR) //将选中的点改为初始化后的样子\n          this.changeNodeColor(idx, this.INITIAL_NODE_COLOR);\n      } else if (back_step.type === \"Question\" && window.question) {\n        var que = back_step.info[2];\n        var ans = back_step.info[3];\n\n        if (ans[0] === \"*\") {\n          ans = ans.replace(/\\*/g, \"\");\n          ans = _name[ans];\n        } //修改ask函数\n\n\n        var that = this;\n        window.layer.prompt({\n          title: que\n        }, function (text, index) {\n          layer.closeAll();\n\n          if (text != ans) {\n            window.layer.msg('正确答案：' + ans, {\n              time: 3000000\n            }); //驻留在该帧\n          }\n        });\n      } else if (back_step.type === \"showHelp\") {\n        var msg = back_step.info[1].split(\"(\")[1].split(\")\")[0];\n        layer.msg(msg, {\n          time: 3000000\n        }); //驻留在该帧\n      } else if (back_step.type === \"showCode\") {\n        var _msg2 = back_step.info[1].split(\"(\")[1].split(\")\")[0];\n        _msg2 = parseInt(_msg2, 10);\n        var content = \"\";\n\n        if (_msg2 === 1) {\n          content = \"\\n        <p style=\\\"white-space:pre-wrap !important; padding: 30px;\\\">    void DFS(Graph& G, int v)\\n        {\\n            <span style=\\\"color: red\\\">visited[v] = 1;\\t</span>\\n            for (int w = FirstAdjVex(G, v); w != -1; w = NextAdjVex(G, v, w))\\n            {\\n                if (!visited[w])\\n                {\\n                    DFS(G, w);\\n                }\\n            }\\n        }</p>\\n            \";\n        } else if (_msg2 === 2) {\n          content = \"\\n        <p style=\\\"white-space:pre-wrap !important; padding: 30px;\\\">    void DFS(Graph& G, int v)\\n        {\\n            visited[v] = 1;\\t\\n            <span style=\\\"color: red\\\">for (int w = FirstAdjVex(G, v); w != -1; w = NextAdjVex(G, v, w))\\n            {\\n                if (!visited[w])\\n                {\\n                    DFS(G, w);\\n                }\\n            }</span>\\n        }</p>\\n            \";\n        }\n\n        var _that = this; //页面层\n\n\n        window.layer.open({\n          type: 1,\n          area: ['800px', '400px'],\n          //宽高\n          content: content,\n          closeBtn: false,\n          title: '提示',\n          btn: '关闭',\n          yes: function yes() {\n            layer.closeAll();\n          }\n        });\n      }\n    } //前进\n\n  }, {\n    key: \"animate_stepforward\",\n    value: function animate_stepforward() {\n      //不管处于什么状态，都使其暂停\n      this.setState({\n        play: \"pause\"\n      });\n      clearTimeout(window.timer);\n      layer.closeAll();\n      actionStep.STEP_COUNT++;\n      var forward_step = this.getStep(actionStep);\n\n      if (forward_step === null) {\n        this.stop();\n        return;\n      }\n\n      if (forward_step.type === \"changeEdgeColor\") {\n        var params = forward_step.info[1].split(\"(\")[1].split(\",\");\n        params.pop();\n        var color = forward_step.info[1].split(\"RGB\")[1];\n        color = this.chooseColor(color);\n        this.changeEdgeColor(parseInt(params[0]), parseInt(params[1]), color);\n      } else if (forward_step.type === \"changeNodeColor\") {\n        var idx = forward_step.info[1].split(\"(\")[1].split(\",\")[0];\n        idx = parseInt(idx);\n        var _color3 = forward_step.info[1].split(\"RGB\")[1];\n        _color3 = this.chooseColor(_color3);\n        this.changeNodeColor(idx, _color3);\n      } else if (forward_step.type === \"Question\" && window.question) {\n        var que = forward_step.info[2];\n        var ans = forward_step.info[3];\n\n        if (ans[0] === \"*\") {\n          ans = ans.replace(/\\*/g, \"\");\n          ans = _name[ans];\n        } //修改ask函数\n\n\n        var that = this;\n        window.layer.prompt({\n          title: que\n        }, function (text, index) {\n          layer.closeAll();\n\n          if (text != ans) {\n            window.layer.msg('正确答案：' + ans, {\n              time: 3000000\n            }); //驻留在该帧\n          }\n        });\n      } else if (forward_step.type === \"showHelp\") {\n        var msg = forward_step.info[1].split(\"(\")[1].split(\")\")[0];\n        layer.msg(msg, {\n          time: 3000000\n        }); //驻留在该帧\n      } else if (forward_step.type === \"showCode\") {\n        var _msg3 = forward_step.info[1].split(\"(\")[1].split(\")\")[0];\n        _msg3 = parseInt(_msg3, 10);\n        var content = \"\";\n\n        if (_msg3 === 1) {\n          content = \"\\n        <p style=\\\"white-space:pre-wrap !important; padding: 30px;\\\">    void DFS(Graph& G, int v)\\n        {\\n            <span style=\\\"color: red\\\">visited[v] = 1;\\t</span>\\n            for (int w = FirstAdjVex(G, v); w != -1; w = NextAdjVex(G, v, w))\\n            {\\n                if (!visited[w])\\n                {\\n                    DFS(G, w);\\n                }\\n            }\\n        }</p>\\n            \";\n        } else if (_msg3 === 2) {\n          content = \"\\n        <p style=\\\"white-space:pre-wrap !important; padding: 30px;\\\">    void DFS(Graph& G, int v)\\n        {\\n            visited[v] = 1;\\t\\n            <span style=\\\"color: red\\\">for (int w = FirstAdjVex(G, v); w != -1; w = NextAdjVex(G, v, w))\\n            {\\n                if (!visited[w])\\n                {\\n                    DFS(G, w);\\n                }\\n            }</span>\\n        }</p>\\n            \";\n        }\n\n        var _that2 = this; //页面层\n\n\n        window.layer.open({\n          type: 1,\n          area: ['800px', '400px'],\n          //宽高\n          content: content,\n          closeBtn: false,\n          title: '提示',\n          btn: '关闭',\n          yes: function yes() {\n            layer.closeAll();\n          }\n        });\n      }\n    }\n  }]);\n\n  return GraphSVG;\n}(React.Component);\n\nvar Node =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(Node, _React$Component2);\n\n  function Node(props) {\n    var _this9;\n\n    _classCallCheck(this, Node);\n\n    _this9 = _possibleConstructorReturn(this, _getPrototypeOf(Node).call(this, props));\n    _this9.SELECT_COLOR = \"#300\";\n    _this9.DEFAULT_COLOR = \"#3C9\";\n    return _this9;\n  } //<g>元素通常用来对相关图形元素进行分组\n  //onContextMenu：对应右击鼠标的响应事件\n\n\n  _createClass(Node, [{\n    key: \"render\",\n    value: function render() {\n      var _React$createElement, _React$createElement2;\n\n      return React.createElement(\"g\", {\n        id: \"node_\" + this.props.name,\n        onContextMenu: this.props.setSE,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 835\n        },\n        __self: this\n      }, React.createElement(\"circle\", {\n        id: \"node_circle_\" + this.props.name,\n        cx: this.props.x,\n        cy: this.props.y,\n        r: this.props.r || 20,\n        fill: this.props.color || this.DEFAULT_COLOR,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 836\n        },\n        __self: this\n      }), React.createElement(\"text\", {\n        id: \"node_text_\" + this.props.name,\n        x: this.props.x,\n        y: this.props.y,\n        fill: \"black\",\n        textAnchor: \"middle\",\n        dominantBaseline: \"middle\",\n        style: {\n          fontSize: \"13px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 837\n        },\n        __self: this\n      }, this.props.hide || this.props.name), React.createElement(\"text\", (_React$createElement = {\n        id: \"node_value\" + this.props.name,\n        x: this.props.x,\n        y: this.props.y + 10,\n        fill: \"black\",\n        textAnchor: \"middle\",\n        dominantBaseline: \"middle\",\n        fontSize: \"13px\"\n      }, _defineProperty(_React$createElement, \"fill\", \"blue\"), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 838\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement), this.props.distance), React.createElement(\"text\", (_React$createElement2 = {\n        id: \"node_value\" + this.props.name,\n        x: this.props.x + 40,\n        y: this.props.y - 5,\n        fill: \"black\",\n        textAnchor: \"middle\",\n        dominantBaseline: \"middle\",\n        fontSize: \"13px\"\n      }, _defineProperty(_React$createElement2, \"fill\", \"black\"), _defineProperty(_React$createElement2, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 839\n      }), _defineProperty(_React$createElement2, \"__self\", this), _React$createElement2), \"1+2=3\"));\n    }\n  }, {\n    key: \"hover\",\n    value: function hover(event) {\n      console.log(event.target.attributes.fill);\n      console.log(event.target.attributes);\n      var attributes = event.target.attributes;\n    }\n  }]);\n\n  return Node;\n}(React.Component);\n\nvar Link =\n/*#__PURE__*/\nfunction (_React$Component3) {\n  _inherits(Link, _React$Component3);\n\n  function Link(props) {\n    var _this10;\n\n    _classCallCheck(this, Link);\n\n    _this10 = _possibleConstructorReturn(this, _getPrototypeOf(Link).call(this, props));\n    _this10.SELECT_COLOR = \"#900\";\n    _this10.DEFAULT_COLOR = _this10.props.color;\n    return _this10;\n  }\n\n  _createClass(Link, [{\n    key: \"render\",\n    value: function render() {\n      this.DEFAULT_COLOR = this.props.color;\n      return React.createElement(\"g\", {\n        id: \"link_\" + this.props.from + \"_\" + this.props.to,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 860\n        },\n        __self: this\n      }, React.createElement(\"line\", {\n        x1: this.props.x1,\n        y1: this.props.y1,\n        x2: this.props.x2,\n        y2: this.props.y2,\n        stroke: this.props.color,\n        strokeWidth: \"5\",\n        style: {\n          cursor: \"pointer\"\n        },\n        onMouseEnter: this.hover.bind(this),\n        onMouseLeave: this.hover.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 861\n        },\n        __self: this\n      }), React.createElement(\"text\", {\n        x: (this.props.x1 + this.props.x2) / 2,\n        y: (this.props.y1 + this.props.y2) / 2,\n        style: {\n          fontSize: \"15px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 862\n        },\n        __self: this\n      }, this.props.distance));\n    }\n  }, {\n    key: \"hover\",\n    value: function hover(event) {\n      var attributes = event.target.attributes;\n      attributes.stroke.value === this.SELECT_COLOR ? attributes.stroke.value = this.DEFAULT_COLOR : attributes.stroke.value = this.SELECT_COLOR;\n    }\n  }]);\n\n  return Link;\n}(React.Component);\n\nexport default GraphSVG;","map":{"version":3,"sources":["/home/cdz/Code/FrontEnd/nw-react/src/app/component/GraphSVG.js"],"names":["Graph","MyMenu","assertFunctionParent","require","React","$","window","jQuery","stepData","_name","actionStep","Object","STEP_COUNT","ACTION_COUNT","question","GraphSVG","props","state","DEFAULT_LINK_COLOR","INITIAL_LINK_COLOR","INITIAL_NODE_COLOR","SELECTED_LINK_COLOR","SELECTED_NODE_COLOR","path","speed","play","start","end","S_NODE","Map","S_EDGE","S_NODE_DIS","S_NODE_INFO","clcMaxMin","nodes","renderNode","links","renderLink","controlstate","width","height","backgroundColor","e","preventDefault","checkChange","bind","changeSpeed","animate_stepback","animate_stepforward","stop","target","checked","console","log","setState","max_lng","Infinity","min_lng","max_lat","min_lat","mid_lng","mid_lat","node","forEach","lat","lng","length","w","refs","graph","clientWidth","h","clientHeight","margin","svg","map","clcCoordinate","x","y","name","setSE","color","has","get","data","link","polyline","isVisible","node1","x1","y1","node2","x2","y2","s","getStrokeColor","dis","edge","event","p","clientX","getLeft","resetColor","clearTimeout","timer","go","animate","layer","msg","that","edgeIn","pointIn","globalIn","push","parseInt","index","start_index","findIndex","v","end_index","JSON","stringify","n1","n2","parseFloat","load","shade","ajax","type","url","sName","eName","algo","success","json","closeAll","error","setTimeout","step","getStep","i","types","params","infos","split","pop","chooseColor","name1","name2","setStrokeColor","idx","set","z","a","b","updateState","stepTemp","steps","Array","info","offset","offsetLeft","offsetParent","stopPropagation","attributes","id","value","menu","append","label","click","popup","clientY","que","prompt","title","text","time","ans","content","open","area","closeBtn","btn","yes","changeEdgeColor","changeNodeColor","replace","ask","showCode","back_step","forward_step","Component","Node","SELECT_COLOR","DEFAULT_COLOR","r","fontSize","hide","distance","fill","Link","from","to","cursor","hover","stroke"],"mappings":"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","sourcesContent":["//import d3 from './d3.v4.min.js';\n//window.d3 = d3;\n//import $ from 'jquery';  //引入jquery\nimport Graph from \"./Graph.js\";\nimport MyMenu from \"../MyMenu.js\";\nimport { assertFunctionParent } from \"babel-types\";\nrequire('../../assets/play.png');\nrequire('../../assets/pause.png');\nlet React = require('react');\n\n//readme: 学长的代码中node的改变是通过state.S_NODE实现，edge(颜色)的改变是通过this.props.link实现!!!!!\n//经补充修改后，边上路径长度的改变通过state.S_EDGE实现\n   \n//import stepData from \"./testData.js\";\nlet $=window.jQuery;\nlet stepData = null;\nlet _name = [];     //存储点名\n//let STEP_COUNT = 0;　　　//学长以STEP_COUNT记录每一个动作的编号（是动作不是帧！！）->改为每一帧的编号\nlet actionStep=new Object();  //采用对象，是为了进行action_count的引用传递\nactionStep.STEP_COUNT=1; //帧从１开始计数（只是为了符合动作表的第四个字段）\nactionStep.ACTION_COUNT=0;\nwindow.question = true;\n\nclass GraphSVG extends React.Component{\n    //其属性来自Panel...this.pros的传递,包括updtaState、node、link\n    constructor(props){\n        super(props);\n        this.state = {};\n\n        //注意：关于点、边的颜色\n        //ＤＦＳ后台传递的颜色：初始化边表示（１０，１０，１０），初始点表示(91,155,2１3),选中点边表示（255,0,0）\n        //DJ后台传递颜色:初始化边（１０，１０，１０），初始化点（９１，１５５，２１３），\n\n        this.DEFAULT_LINK_COLOR = \"#3a6bdb\";  //默认是(浅蓝色)\n        this.INITIAL_LINK_COLOR = \"#0a0a0a\";   //初始化后边的颜色\n        this.INITIAL_NODE_COLOR = \"#5B9BD5\";  //初始化后点的颜色\n        this.SELECTED_LINK_COLOR = \"#ff0000\";   //选中的边，红色\n        this.SELECTED_NODE_COLOR = \"#ff0000\";   //选中的点     \n       \n        this.path = null;\n\n        this.state.speed = 0.5;\n        this.state.play = \"stop\";\n        this.state.start = \"\";\n        this.state.end = \"\";\n        this.state.S_NODE = new Map(); //更新点的颜色;　　　　　　　　　Map是一组键值对的结构，具有极快的查找速度(误以为是Map.js导出的Map类)\n        this.state.S_EDGE = new Map();  //更新边的距离\n        this.state.question= true;\n        this.state.S_NODE_DIS=new Map(); //更新点到起点的距离\n        this.state.S_NODE_INFO=new Map(); //更新点旁边的其他信息，如显示不等式\n    }\n    render(){\n        this.clcMaxMin();\n        let nodes = this.renderNode();\n        let links = this.renderLink();\n\n        let controlstate = this.state.play===\"play\"?\"pauseState\":\"playState\";\n\n        return (\n            <div id=\"graphWrap\">\n                <div id=\"main\">\n                    <div style={{width:\"100%\", height:\"100%\", backgroundColor:\"#FFF\"}}>\n                        <svg ref=\"graph\" width=\"100%\" height=\"100%\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" onContextMenu={(e)=>{e.preventDefault();}}>\n                            {links}\n                            {nodes}\n                        </svg>\n                    </div>\n                </div>\n                <div id=\"tool\">\n                    <div id=\"question\"> 提问 <input id=\"question_checkbox\" type=\"checkbox\" checked={this.state.question} onChange={this.checkChange.bind(this)}/> </div>\n                    <div id=\"speed\" title=\"速度\" onClick={this.changeSpeed.bind(this)}>\n                        <div id=\"speedValue\" style={{width: this.state.speed*100+\"%\"}}></div>\n                    </div>\n                    <div id=\"prev\" title=\"上一步\" onClick={this.animate_stepback.bind(this)}></div>\n                    <div id=\"start\" title=\"开始/暂停\" className={controlstate} onClick={this.play.bind(this)}></div>\n                    <div id=\"next\" title=\"下一步\" onClick={this.animate_stepforward.bind(this)}></div>\n                    <div id=\"end\" title=\"结束\" onClick={this.stop.bind(this)}></div>\n                </div>\n            </div>\n        );\n    }\n\n    //是否提问状态改变\n    checkChange(e){\n        window.question = e.target.checked;\n        console.log(window.question);\n        this.setState({question: !this.state.question});\n    }\n\n    clcMaxMin(){\n        let max_lng = -Infinity, min_lng = Infinity;\n        let max_lat = -Infinity, min_lat = Infinity;\n\n        this.mid_lng = 0;\n        this.mid_lat = 0;\n\n        this.props.node.forEach(node=>{\n            if(node.lat>max_lat)max_lat = node.lat;\n            if(node.lat<min_lat)min_lat = node.lat;\n\n            if(node.lng>max_lng)max_lng = node.lng;\n            if(node.lng<min_lng)min_lng = node.lng;\n            \n            this.mid_lng += node.lng;\n            this.mid_lat += node.lat;\n        });\n\n        this.max_lng = max_lng;\n        this.min_lng = min_lng;\n\n        this.max_lat = max_lat;\n        this.min_lat = min_lat;\n\n        this.mid_lng /= this.props.node.length;\n        this.mid_lat /= this.props.node.length;\n    }\n\n    clcCoordinate(lng, lat){\n        let w = this.refs.graph.clientWidth;\n        let h = this.refs.graph.clientHeight;\n\n        let margin = 50;\n\n        // w = (w-margin - margin)/(this.max_lat-this.min_lat + 0.001)*(lat-this.min_lat) + margin;\n        // h = h - ( (h-margin - margin)/(this.max_lng-this.min_lng + 0.001)*(lng-this.min_lng) + margin ) ;\n\n        w = (w-margin - margin)/(this.max_lng-this.min_lng + 0.001)*(lng-this.min_lng) + margin;\n        h = h - ( (h-margin - margin)/(this.max_lat-this.min_lat + 0.001)*(lat-this.min_lat) + margin ) ;\n\n        return [w, h];\n    }\n\n    renderNode(){\n        let nodes = this.props.node;\n        let svg = nodes.map(node=>{\n            let [x, y] = this.clcCoordinate(node.lng, node.lat);\n            let name = node.name;\n            let setSE = this.setSE.bind(this);\n            let color = null;\n            if(this.state.start===node.name){\n                color = \"#CCFFFF\";\n            }\n            else if(this.state.end===node.name){\n                color = \"#CC6699\";\n            }\n\n            if(this.state.S_NODE.has(node.name)){\n                color = this.state.S_NODE.get(node.name);\n            }\n\n            let data = {name, x, y, setSE, color};   //把data作为属性传递给Node\n            return ( <Node key={\"node\"+node.name} {...data}/> );   //Node类在此脚本末尾！\n            //react利用key来识别组件，它是一种身份标识标识,与props中的属性不同！！！\n        });\n        return svg;\n    }\n\n    renderLink(){\n        let links = this.props.link;\n        let svg = links.map(link=>{\n            if(!link.polyline.isVisible())return;\n            let [x1, y1] = this.clcCoordinate(link.node1.lng, link.node1.lat);\n            let [x2, y2] = this.clcCoordinate(link.node2.lng, link.node2.lat);\n            let s = {\n                name: link.node1.name,\n                x: x1,\n                y: y1,\n            };\n            let e = {\n                name: link.node2.name,\n                x: x2,\n                y: y2,\n            };\n            let color = link.polyline.getStrokeColor();\n            let dis='';  //边的长度\n            for(var edge of this.state.S_EDGE){\n                if((link.node1.name===edge[1][0]&&link.node2.name===edge[1][1])||(link.node1.name===edge[1][1]&&link.node2.name===edge[1][0])){\n                    dis=edge[0]; //距离赋值\n                    break;\n                }\n            }\n           \n            console.log(color, link);\n            return ( <Link key={\"link-\"+s.name+\"-\"+e.name} from={s.name} to={e.name} x1={s.x} y1={s.y} x2={e.x} y2={e.y} color={color} distance={dis}/> );\n        });\n        return svg;\n    }\n\n    changeSpeed(event){\n        let p = (event.clientX - this.getLeft(event.target)) / event.target.clientWidth;\n        console.log(p);\n        this.setState({speed: p});\n    }\n\n    play(event){\n        if(this.state.play===\"stop\"){\n            this.setState({play: \"play\"});\n            this.resetColor();\n            clearTimeout(window.timer);\n            this.go();           //go()包含了初始化以及animate\n            \n        }else if(this.state.play===\"pause\"){\n            this.setState({play: \"play\"});\n            this.animate();     //继续执行\n\n        }else if(this.state.play===\"play\"){\n\n            this.setState({play: \"pause\"});\n            clearTimeout(window.timer);  //暂停,取消计时器他就不再执行（但是所有状态都保存着<最重要是STEP_COUNT>，下次继续animate即可继续执行）\n\n        }\n    }\n\n    stop(){\n        clearTimeout(window.timer);\n        actionStep.STEP_COUNT = 1;\n        //this.setState({play: \"stop\", start: \"\", end: \"\", S_NODE:new Map(), S_EDGE: new Map()});\n        this.setState({play: \"stop\", start: \"\", end: \"\", S_NODE:new Map()});\n         /* global layer */\n        layer.msg(\"结束\");\n    }\n\n    //执行（包括数据传递给C++以及根据C++回传数据显示），会调用animate\n    go(){\n        if(!this.state.start || !this.state.end){\n            return this.stop();\n        };\n\n        var that = this;   //this对象在程序中随时会改变，而var that=this之后，that没改变之前仍然是指向当时的this，这样就不会出现找不到原来的对象。\n\n        var edgeIn = [];\n        var pointIn = [];\n        var globalIn = [];\n\n\n        _name = [];       //存储点的名字\n\n        this.props.node.forEach(node=>{  //提取每个点的经度、维度、编号并存储在pointIn中(C++程序需要输入的点信息)\n            _name.push(node.name);\n            let lng = parseInt(node.lng);\n            let lat = parseInt(node.lat);\n            let index = '*'+(_name.length-1)+'*'\n            pointIn.push([index, lng, lat]);\n        });\n\n        var start_index = '*'+(_name.findIndex(v=>v===this.state.start))+'*';  //找到起点、终点的编号\n        var end_index = '*'+(_name.findIndex(v=>v===this.state.end))+'*';\n\n\n        globalIn.push([pointIn.length]);     //globalIn代表C++程序输入的参数：点数、？\n        pointIn = JSON.stringify(pointIn);\n        globalIn.push([-1000, 1000]);\n        globalIn.push([1000, -1000]);\n        globalIn = JSON.stringify(globalIn);\n\n        \n        that.resetColor();\n        let S_NODE = new Map();\n        let S_EDGE = new Map();\n        this.setState({S_NODE, S_EDGE});  //向 setState() 中传入一个对象来对已有的 state 进行更新。\n\n\n        this.props.link.forEach(link=>{        //整理edgeIn(编号、编号、距离),作为C++程序传入参数\n            if(!link.polyline.isVisible())return;\n            let n1 = '*'+_name.findIndex(v=>v===link.node1.name)+'*';\n            let n2 = '*'+_name.findIndex(v=>v===link.node2.name)+'*';\n            edgeIn.push([n1, n2, parseFloat(link.dis, 10)]);\n        });\n        edgeIn = JSON.stringify(edgeIn);\n//////////////////////////////////////////////////////\n        window.layer.load(1, {shade: [0.4,'#fff']});\n        $.ajax({\n            type:\"POST\",\n            url:\"http://localhost:3001/data\",\n            data:{edgeIn:edgeIn,pointIn:pointIn,globalIn:globalIn,sName:start_index,eName:end_index,algo:window.algo},\n            success: function(json){\n                //console.log(_name);\n                //console.log({start_index, end_index});\n                //console.log(json);\n                // //stepData包括code、steps\n                stepData = json;  //steps的数据是各个动作的含义，比如：\tchangeNodeColor(2,RGB(255,0,0))\tAnimation\t8\n                layer.closeAll();\n\n                //stepData是C++计算传回的数据,根据stepData,前端做出相应动作\n                // 开始动画\n                that.animate();   //不能用this，因为ajax中的this已经不在代表外面的组件了!!!\n            },\n            error: function(){\n                layer.closeAll();\n                layer.msg(\"出错, 提交失败\");\n            }\n        });\n//////////////////////////////////////////////////////\n\n        // that.animate();\n\n    }\n\n    //执行动画\n    //注意：当Question、showHelp、showCode时，之所以return是为了结束当前函数，不再执行当前函数末尾的animate\n    //因为在else if中会使用layer，内部接着使用了setTimeout和animate继续下去\n    animate(){\n        // if(this.state.play!==\"play\")return;\n        //setTimeout(code,millisec), code是要执行的代码，lillisec是遇到setTimer后要等待多少毫秒才执行code!\n        //返回数值id，整型，可用于 取消 setTimeout 设置的函数clearTimeout(id)。也就是这个setTimeout的唯一标示符\n        window.timer = setTimeout(()=>{\n\n            let step = this.getStep(actionStep);  //获取一帧的全部数据\n            layer.closeAll();\n            actionStep.STEP_COUNT++;\n            if(step===null){\n                this.stop();\n                return;\n            }\n            let links = this.props.link;  //将要更新的元素\n            let S_NODE = this.state.S_NODE;\n            let S_EDGE=this.state.S_EDGE;\n\n            for(var i=0;i<step.types.length;i++){\n                if(step.types[i]===\"changeEdgeColor\"){\n                    let params = step.infos[i][1].split(\"(\")[1].split(\",\");\n                    params.pop();\n                    let color = step.infos[i][1].split(\"RGB\")[1];\n                    color = this.chooseColor(color);\n                \n                    //改变边的颜色\n                    let name1 = _name[parseInt(params[0])];\n                    let name2 = _name[parseInt(params[1])];\n                    links.forEach(link=>{\n                        if(link.polyline.isVisible()){\n                            if((link.node1.name===name1&&link.node2.name===name2)||(link.node1.name===name2&&link.node2.name===name1)){\n                                link.polyline.setStrokeColor(color);\n                            }\n                        }\n                    });\n                    //this.props.updateState(null, links);\n                }\n                else if(step.types[i]===\"changeNodeColor\"){\n                    let idx = step.infos[i][1].split(\"(\")[1].split(\",\")[0];\n                    idx = parseInt(idx);\n                    let color = step.infos[i][1].split(\"RGB\")[1];\n                    color = this.chooseColor(color);\n                    let name = _name[idx];  //找到编号对应的点名\n                    S_NODE.set(name,color);  //S_NODE是键值对，改变name对应点的状态\n                    //this.setState({S_NODE});\n                }\n                else if(step.types[i]===\"changeEdgeLength\"){\n                    //\"20\tchangeEdgeLength(0,1,1173)\tAnimation\t2\";\n                    var params=step.infos[i][1].split('(')[1].split(')')[0].split(','); //获取点编号、边距离\n                    let name1 = _name[parseInt(params[0])];  //起点编号\n                    let name2 = _name[parseInt(params[1])];　\n                   let dis=parseFloat(params[2]);\n                   S_EDGE.set(dis,[name1,name2]);\n                \n                }\n                else if(step.types[i]===\"showCode\"){\n                    var y=0;\n                }\n                else if(step.types[i]===\"showHelp\"){\n                    var z=0;\n                }\n                else if(step.types[i]===\"Question\")\n                {\n                    var a=0;\n                }\n                else if(step.types[i]===\"InequalityDisapper\"){\n                    var b=0;\n                }\n                \n            }\n\n            //对一帧中的各元素统一进行刷新\n            this.props.updateState(null, links);\n            this.setState({S_NODE});\n            this.setState({S_EDGE});\n            this.animate();  //重复执行\n\n        }, this.state.speed *1500 +70);\n    \n    }\n\n   \n    //学长原来是获取每一个动作信息－>此处改为获取每一个步骤(帧)的信息\n    getStep(actionStep){\n\n        console.log(\"get step:\"+actionStep.STEP_COUNT); //读取一帧的数据\n        let stepTemp=stepData.steps[actionStep.ACTION_COUNT].split('\\t')[3];  //得到帧的编号\n        if(stepData.steps[actionStep.ACTION_COUNT].split('\\t')[1].split('(')[0]===\"Question\"){ //question动作的帧编号位置不同!\n            stepTemp=stepData.steps[actionStep.ACTION_COUNT].split('\\t')[7];\n        }\n        var types=new Array(); //创建数组，用于保存动作信息\n        var infos=new Array(); \n\n        while(actionStep.STEP_COUNT==stepTemp){  //读取一个动作\n            console.log(\"get action: \"+actionStep.ACTION_COUNT);\n            let info = stepData.steps[actionStep.ACTION_COUNT].split('\\t');  //第ACTION_COUNT条动作信息(作为数组保存在info)                  \n            let type = info[1].split('(')[0];   //info[1]代表动作的解释：changeNodeColor(4,RGB(91,155,213))；  则type对应changeNodeColor\n            types.push(type);\n            infos.push(info);\n            actionStep.ACTION_COUNT++;\n\n            if(stepData.steps.length-1<= actionStep.ACTION_COUNT)return null;  //尚不清楚为什么stepData.steps.length比实际数组长度多了1??\n            console.log(\"length:\"+stepData.steps.length);\n            console.log(\"action count:\"+actionStep.ACTION_COUNT);\n            stepTemp=stepData.steps[actionStep.ACTION_COUNT].split('\\t')[3];  //得到帧的编号\n            if(stepData.steps[actionStep.ACTION_COUNT].split('\\t')[1].split('(')[0]===\"Question\"){ //question动作的帧编号位置不同!\n                stepTemp=stepData.steps[actionStep.ACTION_COUNT].split('\\t')[7];\n            }\n        }\n        return {types, infos};  //返回对象，对象的属性是键值对\n    }\n\n    chooseColor(color){\n        switch(color){\n            case \"(10,10,10))\": return this.INITIAL_LINK_COLOR;   //初始化边（接近黑色）\n            case \"(91,155,213))\": return this.INITIAL_NODE_COLOR; //初始化点（接近蓝色)\n            case \"(255,0,0))\": return this.SELECTED_LINK_COLOR;    //选中点、边（红色）\n            default: return \"#000000\";\n        }\n    }\n\n    checkLink(link, name1, name2){\n        let node1 = link.node1;\n        let node2 = link.node2;\n        if( (node1.name===name1 && node2.name===name2) || (node1.name===name2 && node2.name===name1) ){\n            return true;\n        }\n        return false;\n    }\n\n    //重置link颜色\n    resetColor(){\n        let links = this.props.link;\n        links.forEach(link=>{\n            if(link.polyline.isVisible())\n                link.polyline.setStrokeColor(this.DEFAULT_LINK_COLOR); \n        });\n        this.props.updateState(null, links);\n    }\n\n    /*获取元素的横坐标*/\n    getLeft(e){\n        var offset=e.offsetLeft;\n        if(e.offsetParent!=null){\n        offset+=this.getLeft(e.offsetParent);\n        } \n        return offset;\n    } \n\n    //设置起点终点\n    setSE(event){\n        event.preventDefault();\n        event.stopPropagation();\n        let that = this;\n        let name = event.target.attributes.id.value.split(\"_\").pop();\n\t\t/*\n\t\tlet menu = new nw.Menu();\n\t\tmenu.append(new nw.MenuItem({\n\t\t\tlabel: '设为起点',\n\t\t\tclick: function(){\n                that.setState({start: name});\n\t\t\t}\n\t\t}));\n\t\tmenu.append(new nw.MenuItem({\n\t\t\tlabel: '设为终点',\n\t\t\tclick: function(){\n                that.setState({end: name});\n\t\t\t}\n\t\t}));\n\t\tmenu.popup(event.clientX, event.clientY);*/\n\t\tlet menu = new MyMenu(\"MyMenu_Node_SVG\");\n\t\tmenu.append([{\n\t\t\tlabel: '设为起点',\n\t\t\tclick: function(){\n                that.setState({start: name});\n\t\t\t}\n        },{\n\t\t\tlabel: '设为终点',\n\t\t\tclick: function(){\n                that.setState({end: name});\n\t\t\t}\n        }]);\n        menu.popup(event.clientX, event.clientY);\n\t\t\n\t\treturn false;\n    }\n\n    //提问\n    ask(que, msg){\n        clearTimeout(window.timer);\n        let that = this;\n        window.layer.prompt({title: que}, function(text, index){\n            layer.closeAll();\n            if(text!=msg){\n                window.layer.msg('正确答案：'+msg, {time: 1000});\n                ///////////////////////////////////////////////////////\n                $.ajax({\n                    type:\"POST\",\n                    url:\"/collect\",\n                    data:{que:que,ans:text,msg:msg},\n                    success: function(json){\n                    },\n                    error: function(){\n                    }\n                });\n        ///////////////////////////////////////////////////////\n                setTimeout(()=>{\n                    that.animate();\n                }, 1100);\n            }else{\n                that.animate();\n            }\n        } );\n    }\n    showCode(msg){\n        let content = \"\";\n        if(msg === 1){\n            content = \n            `\n        <p style=\"white-space:pre-wrap !important; padding: 30px;\">    void DFS(Graph& G, int v)\n        {\n            <span style=\"color: red\">visited[v] = 1;\t</span>\n            for (int w = FirstAdjVex(G, v); w != -1; w = NextAdjVex(G, v, w))\n            {\n                if (!visited[w])\n                {\n                    DFS(G, w);\n                }\n            }\n        }</p>\n            `\n        }else if(msg === 2){\n            content = \n            `\n        <p style=\"white-space:pre-wrap !important; padding: 30px;\">    void DFS(Graph& G, int v)\n        {\n            visited[v] = 1;\t\n            <span style=\"color: red\">for (int w = FirstAdjVex(G, v); w != -1; w = NextAdjVex(G, v, w))\n            {\n                if (!visited[w])\n                {\n                    DFS(G, w);\n                }\n            }</span>\n        }</p>\n            `\n        }\n        let that = this;\n        //页面层\n        window.layer.open({\n            type: 1,\n            area: ['800px', '400px'], //宽高\n            content: content,\n            closeBtn: false,\n            title: '提示',\n            btn: '关闭',\n            yes: function(){\n                layer.closeAll();\n                that.animate();\n            }            \n        });\n    }\n\n\n   //****************************************************dd by cdz\n//执行动作：根据STEP_COUNT执行！！！\n    //注意：当Question、showHelp、showCode时，之所以return是为了结束当前函数，不再执行当前函数末尾的animate\n    //因为在else if中会使用layer，内部接着使用了setTimeout和animate继续下去\n\n    frame_animate(){  \n        // if(this.state.play!==\"play\")return;\n        //setTimeout(code,millisec), code是要执行的代码，lillisec是遇到setTimer后要等待多少毫秒才执行code!\n        //返回数值id，整型，可用于 取消 setTimeout 设置的函数clearTimeout(id)。也就是这个setTimeout的唯一标示符\n        window.timer = setTimeout(()=>{\n\n            let step = this.getStep(actionStep);  //获得每一步动作的数据(从类变量stepData中获得),包括type、info\n            layer.closeAll();\n            actionStep.STEP_COUNT++;\n            if(step===null){\n                this.stop();\n                return;\n            }\n\n            if(step.type===\"changeEdgeColor\"){\n                let params = step.info[1].split(\"(\")[1].split(\",\");\n                params.pop();\n                let color = step.info[1].split(\"RGB\")[1];\n                color = this.chooseColor(color);\n                this.changeEdgeColor(parseInt(params[0]),parseInt(params[1]), color);\n            }else if(step.type===\"changeNodeColor\"){\n                let idx = step.info[1].split(\"(\")[1].split(\",\")[0];\n                idx = parseInt(idx);\n                let color = step.info[1].split(\"RGB\")[1];\n                color = this.chooseColor(color);\n                this.changeNodeColor(idx, color);\n            }else if(step.type===\"Question\" && window.question){\n                let que = step.info[2];\n                let ans = step.info[3];\n                if(ans[0]===\"*\"){\n                    ans = ans.replace(/\\*/g, \"\");\n                    ans = _name[ans];\n                }\n                return this.ask(que, ans);   \n            }else if(step.type===\"showHelp\"){\n                let msg = step.info[1].split(\"(\")[1].split(\")\")[0];\n                layer.msg(msg, {time: 3000});\n                return setTimeout(()=>{    \n                    this.animate();\n                }, 3200);\n            }else if(step.type===\"showCode\"){\n                let msg = step.info[1].split(\"(\")[1].split(\")\")[0];\n                msg = parseInt(msg, 10);\n                return this.showCode(msg);\n            }\n\n            this.animate();  //重复执行\n\n        }, this.state.speed *1000 +70);\n    }\n\n\n   //倒退:为了减少不必要的理解错误，只能倒退到点和边初始化完成以后\n   animate_stepback(){\n    //不管处于什么状态，都使其暂停\n    this.setState({play: \"pause\"});\n    clearTimeout(window.timer);\n    layer.closeAll();\n   \n\n    actionStep.STEP_COUNT--;\n    let back_step = this.getStep(actionStep);\n    if(back_step===null){\n        this.stop();\n        return;\n    }\n\n    if(back_step.type===\"changeEdgeColor\"){\n        let params = back_step.info[1].split(\"(\")[1].split(\",\");\n        params.pop();\n        let color = back_step.info[1].split(\"RGB\")[1];\n        color = this.chooseColor(color);\n        if(color==this.SELECTED_LINK_COLOR)   //只对已选中的边进行改变,变为初始化后的样子\n            this.changeEdgeColor(parseInt(params[0]),parseInt(params[1]),this.INITIAL_LINK_COLOR);\n    }else if(back_step.type===\"changeNodeColor\"){\n        let idx = back_step.info[1].split(\"(\")[1].split(\",\")[0];\n        idx = parseInt(idx);\n        let color =back_step.info[1].split(\"RGB\")[1];\n        color = this.chooseColor(color);\n        if(color==this.SELECTED_NODE_COLOR)  //将选中的点改为初始化后的样子\n            this.changeNodeColor(idx, this.INITIAL_NODE_COLOR);\n    }else if(back_step.type===\"Question\" && window.question){\n        let que = back_step.info[2];\n        let ans = back_step.info[3];\n        if(ans[0]===\"*\"){\n            ans = ans.replace(/\\*/g, \"\");\n            ans = _name[ans];\n        }\n        //修改ask函数\n        let that = this;\n        window.layer.prompt({title: que}, function(text, index){\n            layer.closeAll();\n            if(text!=ans){\n                window.layer.msg('正确答案：'+ans, {time: 3000000});  //驻留在该帧\n            }\n        });  \n    }else if(back_step.type===\"showHelp\"){\n        let msg =back_step.info[1].split(\"(\")[1].split(\")\")[0];\n        layer.msg(msg, {time: 3000000});    //驻留在该帧\n        \n    }else if(back_step.type===\"showCode\"){\n        let msg = back_step.info[1].split(\"(\")[1].split(\")\")[0];\n        msg = parseInt(msg, 10);\n        let content = \"\";\n        if(msg === 1){\n            content = \n            `\n        <p style=\"white-space:pre-wrap !important; padding: 30px;\">    void DFS(Graph& G, int v)\n        {\n            <span style=\"color: red\">visited[v] = 1;\t</span>\n            for (int w = FirstAdjVex(G, v); w != -1; w = NextAdjVex(G, v, w))\n            {\n                if (!visited[w])\n                {\n                    DFS(G, w);\n                }\n            }\n        }</p>\n            `\n        }else if(msg === 2){\n            content = \n            `\n        <p style=\"white-space:pre-wrap !important; padding: 30px;\">    void DFS(Graph& G, int v)\n        {\n            visited[v] = 1;\t\n            <span style=\"color: red\">for (int w = FirstAdjVex(G, v); w != -1; w = NextAdjVex(G, v, w))\n            {\n                if (!visited[w])\n                {\n                    DFS(G, w);\n                }\n            }</span>\n        }</p>\n            `\n        }\n        let that = this;\n        //页面层\n        window.layer.open({\n            type: 1,\n            area: ['800px', '400px'], //宽高\n            content: content,\n            closeBtn: false,\n            title: '提示',\n            btn: '关闭',\n            yes: function(){\n                layer.closeAll();\n            }            \n        });\n    }\n   }\n\n   //前进\n   animate_stepforward(){\n        //不管处于什么状态，都使其暂停\n    this.setState({play: \"pause\"});\n    clearTimeout(window.timer);\n    layer.closeAll();\n\n    actionStep.STEP_COUNT++;\n    let forward_step = this.getStep(actionStep);\n    if(forward_step===null){\n        this.stop();\n        return;\n    }\n\n    if(forward_step.type===\"changeEdgeColor\"){\n        let params = forward_step.info[1].split(\"(\")[1].split(\",\");\n        params.pop();\n        let color = forward_step.info[1].split(\"RGB\")[1];\n        color = this.chooseColor(color);\n        this.changeEdgeColor(parseInt(params[0]),parseInt(params[1]),color);\n    }else if(forward_step.type===\"changeNodeColor\"){\n        let idx = forward_step.info[1].split(\"(\")[1].split(\",\")[0];\n        idx = parseInt(idx);\n        let color =forward_step.info[1].split(\"RGB\")[1];\n        color = this.chooseColor(color);\n        this.changeNodeColor(idx,color);\n    }else if(forward_step.type===\"Question\" && window.question){\n        let que = forward_step.info[2];\n        let ans = forward_step.info[3];\n        if(ans[0]===\"*\"){\n            ans = ans.replace(/\\*/g, \"\");\n            ans = _name[ans];\n        }\n        //修改ask函数\n        let that = this;\n        window.layer.prompt({title: que}, function(text, index){\n            layer.closeAll();\n            if(text!=ans){\n                window.layer.msg('正确答案：'+ans, {time: 3000000});  //驻留在该帧\n            }\n        });  \n    }else if(forward_step.type===\"showHelp\"){\n        let msg =forward_step.info[1].split(\"(\")[1].split(\")\")[0];\n        layer.msg(msg, {time: 3000000});    //驻留在该帧\n        \n    }else if(forward_step.type===\"showCode\"){\n        let msg = forward_step.info[1].split(\"(\")[1].split(\")\")[0];\n        msg = parseInt(msg, 10);\n        let content = \"\";\n        if(msg === 1){\n            content = \n            `\n        <p style=\"white-space:pre-wrap !important; padding: 30px;\">    void DFS(Graph& G, int v)\n        {\n            <span style=\"color: red\">visited[v] = 1;\t</span>\n            for (int w = FirstAdjVex(G, v); w != -1; w = NextAdjVex(G, v, w))\n            {\n                if (!visited[w])\n                {\n                    DFS(G, w);\n                }\n            }\n        }</p>\n            `\n        }else if(msg === 2){\n            content = \n            `\n        <p style=\"white-space:pre-wrap !important; padding: 30px;\">    void DFS(Graph& G, int v)\n        {\n            visited[v] = 1;\t\n            <span style=\"color: red\">for (int w = FirstAdjVex(G, v); w != -1; w = NextAdjVex(G, v, w))\n            {\n                if (!visited[w])\n                {\n                    DFS(G, w);\n                }\n            }</span>\n        }</p>\n            `\n        }\n        let that = this;\n        //页面层\n        window.layer.open({\n            type: 1,\n            area: ['800px', '400px'], //宽高\n            content: content,\n            closeBtn: false,\n            title: '提示',\n            btn: '关闭',\n            yes: function(){\n                layer.closeAll();\n            }            \n        });\n    }\n\n   }\n\n}\n\n\n\n\n\nclass Node extends React.Component{\n    constructor(props){\n        super(props);\n        this.SELECT_COLOR = \"#300\";\n        this.DEFAULT_COLOR = \"#3C9\";\n    }\n\n    //<g>元素通常用来对相关图形元素进行分组\n    //onContextMenu：对应右击鼠标的响应事件\n    render(){\n        return (\n            <g id={\"node_\"+this.props.name} onContextMenu={this.props.setSE}>\n                <circle id={\"node_circle_\"+this.props.name} cx={this.props.x} cy={this.props.y} r={this.props.r || 20} fill={this.props.color ||　this.DEFAULT_COLOR}></circle>\n                <text id={\"node_text_\"+this.props.name} x={this.props.x} y={this.props.y} fill=\"black\" textAnchor=\"middle\" dominantBaseline=\"middle\" style={{fontSize: \"13px\"}}>{this.props.hide || this.props.name}</text>\n                <text id={\"node_value\"+this.props.name} x={this.props.x} y={this.props.y+10} fill=\"black\" textAnchor=\"middle\" dominantBaseline=\"middle\" fontSize='13px' fill='blue'>{this.props.distance}</text>\n                <text id={\"node_value\"+this.props.name} x={this.props.x+40} y={this.props.y-5} fill=\"black\" textAnchor=\"middle\" dominantBaseline=\"middle\" fontSize='13px' fill='black'>1+2=3</text>\n            </g>\n        );\n    }\n    hover(event){\n        console.log(event.target.attributes.fill);\n        console.log(event.target.attributes);\n        let attributes = event.target.attributes;\n    }\n}\n\nclass Link extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.SELECT_COLOR = \"#900\";\n        this.DEFAULT_COLOR = this.props.color;\n    }\n    render(){\n        this.DEFAULT_COLOR = this.props.color;\n         return (\n            <g id={\"link_\"+this.props.from+\"_\"+this.props.to}>\n                 <line x1={this.props.x1} y1={this.props.y1} x2={this.props.x2} y2={this.props.y2} stroke={this.props.color} strokeWidth=\"5\" style={{cursor: \"pointer\"}} onMouseEnter={this.hover.bind(this)} onMouseLeave={this.hover.bind(this)}/>\n                 <text x={(this.props.x1+this.props.x2)/2} y={(this.props.y1+this.props.y2)/2}  style={{fontSize:\"15px\"}}>{this.props.distance}</text>\n             </g>\n        );\n    }\n    hover(event){\n        let attributes = event.target.attributes;\n        attributes.stroke.value===this.SELECT_COLOR ? attributes.stroke.value=this.DEFAULT_COLOR : attributes.stroke.value=this.SELECT_COLOR;\n    }\n}\n\nexport default GraphSVG;"]},"metadata":{},"sourceType":"module"}