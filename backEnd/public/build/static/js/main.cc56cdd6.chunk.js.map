{"version":3,"sources":["assets/play.png","assets/pause.png","serviceWorker.js","app/component/Map.js","app/MyMenu.js","app/component/Sidebar.js","app/eventProxy.js","app/component/GraphTable.js","app/component/GraphSVG.js","app/component/Panel.js","index.js"],"names":["module","exports","Boolean","window","location","hostname","match","React","require","Map","createElement","id","BMap","map","point","Point","centerAndZoom","enableScrollWheelZoom","addControl","NavigationControl","ScaleControl","OverviewMapControl","MapTypeControl","setCurrentCity","localSearch","LocalSearch","renderOptions","panel","onInfoHtmlSet","this","bind","poi","dom","_this","console","log","title","node","parentNode","anchor","querySelector","remove","onClick","addNode","querySelectorAll","length","btn","document","str","createTextNode","className","appendChild","onclick","name","lng","lat","nodes","props","findIndex","n","push","updateState","Component","MyMenu","menu","body","innerHTML","prototype","append","items","t","forEach","item","label","addEventListener","click","style","display","popup","x","y","top","left","v","algo","algos","Sidebar","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","MARGIN_LEFT","RIGHT","state","right","marginLeft","search","_this2","Sidebar_React","key","nodeClick","onContextMenu","ndoeMenuClick","algoDOM","index","value","type","onChange","inputChange","searchClick","handleSelect","confirmClick","close","event","target","is","showDis","setState","clearOverlays","preventDefault","nodeTitle","innerText","that","splice","clientX","clientY","_this3","layer","load","shade","link","loadLinks","setTimeout","autoViewport","_load","asyncToGenerator","regenerator_default","a","mark","_callee","i","node1","j","node2","results","wrap","_context","prev","next","Array","from","loadLink","sent","onSearchComplete","stop","apply","arguments","then","closeAll","catch","err","alert","p1","p2","Promise","resolve","reject","DrivingRoute","point1","point2","resultsObj","plan","getPlan","dis","getDistance","path","getRoute","getPath","polyline","Polyline","addOverlay","setLink","ndoes","points","marker","Marker","Label","offset","Size","setLabel","viewport","getViewport","center","zoom","eventProxy","onObj","oneObj","on","fn","undefined","one","off","trigger","args","concat","slice","GraphTable","tab","code","actions","SELECTED_LINK_COLOR","DEFAULT_LINK_COLOR","onShowCode","assertThisInitialized","onShowAction","content","setContent","GraphTable_React","width","height","backgroundColor","setPTab","setLTab","setMatrixTab","setCodeTab","setActionTab","showCode","showAction","_ref","renderPoint","renderLink","renderMatrix","renderCode","renderAction","td","links","ifVisible","isVisible","ifHighlight","getStrokeColor","highlightLink","nodataGrid","horizonMatrxHead","maxtrixContent","headName","name1","dists","dist","flag","align","cols","rows","autoFocus","readOnly","actionContent","action","l","setStrokeColor","hide","show","$","jQuery","stepData","_name","actionStep","STEP_COUNT","question","GraphSVG","INITIAL_LINK_COLOR","INITIAL_NODE_COLOR","SELECTED_NODE_COLOR","speed","play","start","end","S_NODE","S_EDGE","S_NODE_DIS","S_NODE_INFO","clcMaxMin","renderNode","controlstate","GraphSVG_React","ref","version","xmlns","e","checked","checkChange","changeSpeed","animate_back","animate_forward","reSet","resetColor","max_lng","Infinity","min_lng","max_lat","min_lat","mid_lng","mid_lat","w","refs","graph","clientWidth","h","clientHeight","_this3$clcCoordinate","clcCoordinate","_this3$clcCoordinate2","slicedToArray","setSE","color","distance","info","has","get","data","GraphSVG_Node","assign","_this4","_this4$clcCoordinate","_this4$clcCoordinate2","x1","y1","_this4$clcCoordinate3","_this4$clcCoordinate4","x2","y2","s","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","edge","return","GraphSVG_Link","to","p","getLeft","clearTimeout","timer","go","animate","msg","_this5","edgeIn","pointIn","globalIn","parseInt","JSON","stringify","start_index","end_index","n1","n2","parseFloat","ajax","url","sName","eName","success","json","steps","stepTemp","split","actionGetHandler","error","_this6","step","getStep","types","params","infos","pop","chooseColor","name2","idx","set","codeName","codeChangeHandler","time","que","replace","ans","ask","pathNum","path_num","ans_length","path_str","nStep","_this7","offsetLeft","offsetParent","stopPropagation","attributes","prompt","text","_this8","back_step","_this9","forward_step","Node","_this10","SELECT_COLOR","DEFAULT_COLOR","cx","cy","r","fill","textAnchor","dominantBaseline","fontSize","defineProperty","Link","_this11","stroke","strokeWidth","cursor","onMouseEnter","hover","onMouseLeave","Panel","MARGIN_RIGHT","LEFT","marginRight","Panel_React","component_GraphSVG","component_GraphTable","ReactDOM","APP","src_React","component_Sidebar","component_Map","component_Panel","oldNode","oldLink","render","src_APP","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.cc56cdd6.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfaBBoAAAC1VYTSAAABiklEQVQ4y73Sv04UURTH8e+5M7C7ZndAdgETTbTTxpgIRgoLY2Ik2PoG64PwDEQLEgs6NbYWPoAVCTZWNIRAQpAF/0Ci7u7M+VnMYBbYgUrPKU5ycz+559574F+H5WVmYGntXBDlpU+deNRC6s4VvlwMbmJ1X/Rn9p0d9ymm2DsfTKNJLemhFnSVrYNOlRaT7JeDFt7ytjdU1309rl1iMz0STZoclAE11FYihJp6pAfWs82sKyaY4NtZcBlPvO2J4zgedE1P/I59Ddtp5ozz4zQYR4meFyfkOaJbeuo3bKey26PBGIeDIDkLEKppRvP9MTb8sFo0FnKQlmZ23Rf9rc39LloqQFaSTkqKz/ptL0CcF2d4CLB1luwNJ0FaNgm79tqWK+vp8dAdg2zY5iN7zwutjqR9ROcC0OOjveRD9DMiOzEiw1qSfbZle2cd4xfVgU87fUIAsG1WbGV0wwGnS3f43QJhOqyF/ehVfM+sQo1qySvY3xLpLjGf4q4B/bJXGwBFFVb6K/8n/gBIW70kwgYH3gAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNi0wOS0xN1QxNToxODoyNSswODowMCtEZsAAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTAtMDQtMjZUMDA6MDA6MDArMDg6MDCgVTtdAAAATXRFWHRzb2Z0d2FyZQBJbWFnZU1hZ2ljayA3LjAuMS02IFExNiB4ODZfNjQgMjAxNi0wOS0xNyBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ93ZpU4AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAXdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADQ4h2CHLQAAABZ0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAA0OH/PR6AAAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTI3MjIxMTIwMAkpDe8AAAASdEVYdFRodW1iOjpTaXplADUuODdLQoRSJ5sAAABbdEVYdFRodW1iOjpVUkkAZmlsZTovLy9ob21lL3d3d3Jvb3Qvc2l0ZS93d3cuZWFzeWljb24ubmV0L2Nkbi1pbWcuZWFzeWljb24uY24vc3JjLzEwOS8xMDk0Ni5wbmc6EbOHAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfaBBoAAAC1VYTSAAAAtklEQVQ4y92SPQrCQBCFv1lTWNtbeALxIOk9jYWexk5I6x3S2IpgYZle2OxYZP/EFSwUgq8a3s77WRgYHQRgVXhoC2wLVH6eypoFCghn3XMHQZdS+w2rBzkRBA5msmXuxVc9cgOH1rIL7gpJ0IPBxOTJMNuUT+oSBKBkZpF9QeW9CrDvBWWv/ouC31f6m09L5OSTBIeLnJ/tc4jNBA46NvG8L3SebcIGliaLN+S3N5Au6xigjBIPRFJDfNYyswsAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTYtMDktMTdUMTU6MjI6MjQrMDg6MDAD85u8AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDEwLTA0LTI2VDAwOjAwOjAwKzA4OjAwoFU7XQAAAE10RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNy4wLjEtNiBRMTYgeDg2XzY0IDIwMTYtMDktMTcgaHR0cDovL3d3dy5pbWFnZW1hZ2ljay5vcmfd2aVOAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAF3RFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAA0OIdghy0AAAAWdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANDh/z0egAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADEyNzIyMTEyMDAJKQ3vAAAAEnRFWHRUaHVtYjo6U2l6ZQA1LjQ5S0LEGrUpAAAAW3RFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vaG9tZS93d3dyb290L3NpdGUvd3d3LmVhc3lpY29uLm5ldC9jZG4taW1nLmVhc3lpY29uLmNuL3NyYy8xMjIvMTIyMDUucG5naRjBHQAAAABJRU5ErkJggg==\"","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","let React = require(\"react\");\n\nclass Map extends React.Component{\n    render(){\n        return (\n            <div id=\"map\">\n            </div>\n        );\n    }\n    //组件挂载后创建地图\n\tcomponentDidMount() {\n\t\t// 创建地图实例  \n\t\tvar BMap = window.BMap;    //add by me（不知道为什么，学长那个不用添加全局变量，到这里却不行）\n\t    let map = new BMap.Map(\"map\");\n\t\twindow.map = map;  //commented by me\n\t\t// 创建点坐标  \n\t\tlet point = new BMap.Point(111.539334, 30.47691);\n\t\t// 初始化地图，设置中心点坐标和地图级别 \n\t\tmap.centerAndZoom(point, 5);\n\t\t//开启鼠标滚轮缩放\n\t\tmap.enableScrollWheelZoom(true);\n\t\tmap.addControl(new BMap.NavigationControl());    \n\t\tmap.addControl(new BMap.ScaleControl());    \n\t\tmap.addControl(new BMap.OverviewMapControl());    \n\t\tmap.addControl(new BMap.MapTypeControl());    \n\t\tmap.setCurrentCity(\"武汉\");\n\t\tlet localSearch = new BMap.LocalSearch(map, {\n\t\t\trenderOptions: {map: map,panel: \"results\"},\n\t\t\tonInfoHtmlSet: this.onInfoHtmlSet.bind(this) //如何获得参数的??\n        }); \n        window.localSearch = localSearch;\n\t}\n\t//marker设置添加按钮\n\tonInfoHtmlSet(poi, dom){\n\t\tconsole.log(poi);\n\t\tlet title = poi.title;\n\t\tlet point = poi.point;\n\t\tlet node = dom.parentNode.parentNode;\n\t\tlet anchor = node.querySelector(\"a\");\n\t\tif(anchor)anchor.remove();\n\n\t\tlet onClick = ()=>{\n\t\t\tthis.addNode(title, point);\n\t\t}\n\n\t\tif(node.querySelectorAll(\"button\").length<=0){\n\t\t\tlet btn = document.createElement(\"button\");\n\t\t\tlet str = document.createTextNode(\"添加\");\n\t\t\tbtn.className = \"add\";\n\t\t\tbtn.appendChild(str); \n\t\t\tbtn.onclick = onClick;\n\t\t\tnode.appendChild(btn);\n\t\t\treturn;\n\t\t}\n\t\tnode.querySelector(\"button\").onclick = onClick;\n\t}\n\t//add mark point\n\taddNode(title, point){\n        console.log(\"添加：\"+title+point);\n        let node = {\n            name: title,\n            lng: point.lng,\n            lat: point.lat\n        }\n        let nodes = this.props.node;\n        let index = nodes.findIndex(n=>{\n            return n.name === node.name;  //n就代表nodes\n        });\n        if(index<0){                      //添加结点\n            nodes.push(node);\n            this.props.updateState(nodes);\n        }\n\t}\n}\n\nexport default Map;","var MyMenu = function(id){\n    if(!document.querySelector(\"#\"+id)){\n        var menu = document.createElement(\"div\");\n        menu.id = id;\n        menu.className = \"mymenu\";\n        document.body.appendChild(menu);\n    }\n    this.menu = document.querySelector(\"#\"+id);\n    this.menu.innerHTML = \"\";\n};\nMyMenu.prototype.append = function(items){\n    var t = this;\n    items.forEach(item => {\n        var dom = document.createElement(\"div\");\n        dom.className = \"myitem\";\n        dom.innerHTML = item.label;\n        dom.addEventListener(\"click\", function(){\n            item.click();\n            t.menu.style.display = \"none\";\n            return false;\n        } ,true);\n        t.menu.appendChild(dom);\n    });\n}\nMyMenu.prototype.popup = function(x, y){\n    this.menu.style.display = \"block\";\n    this.menu.style.top = y+\"px\";\n    this.menu.style.left = x+\"px\";\n}\ndocument.body.addEventListener('click', function(){\n    document.querySelectorAll(\".mymenu\").forEach(v => v.style.display = \"none\");\n} ,true);\n\n\nexport default MyMenu;","import MyMenu from \"../MyMenu.js\";\n\n//let layer = require(\"./app/layer/layer.js\");\n\n\nlet React = require(\"react\");\n\nwindow.algo = \"DFS\";  //保存选择的方法\n\nif(!window.algos)\n\twindow.algos = [\"DFS\",\"dijkstra\"];\n\n\n\n\nclass Sidebar extends React.Component{\n\n\t//它的属性来自APP类，见index.js\n    constructor(props){\n        super(props);\n\n        this.MARGIN_LEFT = 150;\n        this.RIGHT = 10;\n\n        this.state = {\n            right: 0,\n            marginLeft: 0,\n            search: \"武汉\"\n        };\n    }\n    render(){\n        let nodes = this.props.node.map(node=>{\n            let v = node.name;\n            return <p key={v} onClick={this.nodeClick.bind(this)} onContextMenu={this.ndoeMenuClick.bind(this)}>{v}</p>\n\t\t});\n\t\tlet algoDOM = window.algos.map((v, index)=>{\n\t\t\t//if(index===0)window.algo = v;   注销此句，否则window.algo始终是window.algos的第一个算法\n\t\t\treturn <option key={\"algo_\"+v} value={v}>{v+\"算法\"}</option>;\n\t\t});\n\n        return (\n            <div id=\"sidebar\" style={{marginLeft: this.state.marginLeft+\"px\"}}>\n                <div id=\"search\">\n\t\t\t\t\t\t<input type=\"text\" id=\"input\" value={this.state.search} onChange={this.inputChange.bind(this)}/>\n\t\t\t\t\t\t<button onClick={this.searchClick.bind(this)}>查询</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"nodeList\">\n                        {nodes}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"algos\">\n\t\t\t\t\t\t<select onChange={this.handleSelect.bind(this)}>\n\t\t\t\t\t\t\t{algoDOM}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"confirm\">\n\t\t\t\t\t\t<button onClick={this.confirmClick.bind(this)}>确定</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"info\">\n\t\t\t\t\t\t<button >退出</button>\n\t\t\t\t\t</div>\n                <div className=\"drawer\" style={{right: this.state.right+\"px\"}} onClick={this.close.bind(this)}></div>\n            </div>\n        );\n\t}\n\n\t// 选择算法\n\thandleSelect(event){\n\t\tconsole.log(event.target.value);\n\t\twindow.algo = event.target.value;\n\t\tif(Object.is(window.algo,\"dijkstra\"))  //dj算法需要显示距离(直接用等号判断相等存在问题，详见http://www.cnblogs.com/liaokaichang/p/7567433.html)\n\t\t\t\twindow.showDis=true;\n\t\t\t\n\t}\n\n    //关闭左栏\n    close(){\n        if(this.state.right!==0){\n            this.setState({\n                right: 0,\n                marginLeft: 0\n            });\n        }else{\n            this.setState({\n                right: -this.RIGHT,\n                marginLeft: -this.MARGIN_LEFT\n            });\n        }\n\t}\n\t\n    //监听输入框变换\n    inputChange(event){\n\t\tthis.setState({search: event.target.value});\n    }\n    //点击查询按钮\n    searchClick(){\n        window.map.clearOverlays();\n\t\tlet str = this.state.search;      \n\t\twindow.localSearch.search(str);  //百度地图查询的api见Map.js\n    }\n    //左击 节点\n    nodeClick(){\n        \n    }\n    //右击 节点\n    ndoeMenuClick(event){\n\t\tevent.preventDefault();\n\t\t/*\n\t\tlet nodeTitle = event.target.innerText;\n\t\tlet that = this;\n\t\tlet menu = new nw.Menu();\n\t\tmenu.append(new nw.MenuItem({\n\t\t\tlabel: '移除',\n\t\t\tclick: function(){\n                let nodes = that.props.node;\n                let index = nodes.findIndex(n=>{\n                    return n.name === nodeTitle;\n                });\n                if(index<0)return;\n\n                nodes.splice(index, 1);\n                that.props.updateState(nodes);\n\t\t\t}\n\t\t}));\n\t\tmenu.popup(event.clientX, event.clientY);*/\n\t\t\n\t\tlet nodeTitle = event.target.innerText;\n\t\tlet that = this;\n\t\tlet menu = new MyMenu(\"MyMenu_Node\");\n\t\tmenu.append([{\n\t\t\tlabel: '移除',\n\t\t\tclick: function(){\n                let nodes = that.props.node;\n                let index = nodes.findIndex(n=>{\n                    return n.name === nodeTitle;\n                });\n                if(index<0)return;\n\n                nodes.splice(index, 1);\n                that.props.updateState(nodes);\n\t\t\t}\n\t\t}]);\n\t\tmenu.popup(event.clientX, event.clientY);\n\t\t\n\t\treturn false;\n\t}\n\t\n    //确认节点，点击后要开始搜索路径\n    confirmClick(event){\n\t\twindow.map.clearOverlays();\n        window.layer.load(1, {shade: [0.4,'#fff']});\n        //清空\n        this.props.link.splice(0);\n\t\tthis.loadLinks();\n\t\tsetTimeout(()=>this.autoViewport(), 600);\n\t}\n\t\n\t// 导入全部路线\n\tloadLinks(){\n\t\tlet that = this;\n\t\tasync function load(){\n\t\t\tlet nodes = Array.from(that.props.node);\n\t\t\tfor(let i=0;i<nodes.length;i++){\n\t\t\t\tlet node1 = nodes[i];\n\t\t\t\tfor(let j=i+1;j<nodes.length;j++){\n\t\t\t\t\tlet node2 = nodes[j];\n\t\n\t\t\t\t\tconsole.log(node1.name+\"--->\"+node2.name);\n\t\n\t\t\t\t\tlet results = await that.loadLink(node1,node2);\n\t\t\t\t\tthat.onSearchComplete(results);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tload()\n\t\t.then(()=>{\n\t\t\twindow.layer.closeAll();\n\t\t\t\n\t\t})\n\t\t.catch(err=>{\n\t\t\t /* global layer */\n            layer.closeAll();\n            console.log(err);\n\t\t\talert(err);\n\t\t});\n\t}\n\t// 导入路线数据\n\tloadLink(node1, node2){\n\t\tvar BMap = window.BMap;    //add my me\n\t\tvar p1 = new BMap.Point(node1.lng, node1.lat);\n\t\tvar p2 = new BMap.Point(node2.lng, node2.lat);\n\n\t\treturn new Promise((resolve, reject)=>{\n\t\t\tlet drivingRoute = new BMap.DrivingRoute(window.map, {renderOptions:{map: null, autoViewport: false}, onSearchComplete:(results)=>{\n\t\t\t\t//if(drivingRoute.getStatus()!==BMap.BMAP_STATUS_SUCCESS){\n\t\t\t\t\t//reject(\"导入失败\");\n\t\t\t\t//};      getStatus返回状态不正确，尚不知原因，暂时注释此部分\n\t\t\t\tresolve({results, node1, node2});\n\t\t\t}});\n\t\t\tdrivingRoute.search(p1, p2);\n\t\t});\n\t}\n\n\t//重写searchRout，使其线性化\n\tsearchRoute(point1, point2){\n\t}\n\n\t// 搜索路线回调函数\n\tonSearchComplete(resultsObj){\n        let results = resultsObj.results;\n        let node1 = resultsObj.node1;\n        let node2 = resultsObj.node2;\n        \n\t\tlet plan = results.getPlan(0);\n\t\tlet dis = plan.getDistance(true);\n\t\tlet route = plan.getRoute(0);\n\t\tlet path = route.getPath();\n\t\tvar BMap = window.BMap;    //add my me\n\t\tlet polyline = new BMap.Polyline(path);\n\t\twindow.map.addOverlay(polyline);\n\t\t\n\t\tthis.setLink(node1, node2, dis, polyline);\n\t}\n\n\t// 设置路线到 main 的 state\n\tsetLink(node1, node2, dis, polyline){\n        let link = this.props.link;\n        link.push({node1, node2, dis, polyline});\n        this.props.updateState(null, link);\n\t}\n\t\n\t//根据所选node设置最佳视图\n\tautoViewport(){\n\t\tlet ndoes = this.props.node;\n\t\t//console.log('nodes'+nodes);\n\t\tlet points = [];\n\t\tndoes.forEach(node=>{\n\t\t\tvar BMap = window.BMap;    //add my me\n\t\t\tlet point = new BMap.Point(node.lng, node.lat);\n\t\t\tpoints.push(point);\n\t\t\t//添加marker\n\t\t\tlet marker = new BMap.Marker(point, {title: node.name}); \t\n\t\t\tlet label = new BMap.Label(node.name, {offset:new BMap.Size(20,-10)});\n\t\t\tmarker.setLabel(label);\n\t\t\twindow.map.addOverlay(marker);\n\t\t});\n\t\tlet viewport = window.map.getViewport(points);\n\t\twindow.map.centerAndZoom(viewport.center, viewport.zoom);\n\t}\n}\n\nexport default Sidebar;","// eventProxy.js\n//add by cdz, 用于组件间通信（订阅者、发布者模式）\n//此项目用于在GraphSVG 和　GraphTable间传递消息，更新显示代码(showCode)\n\n\n'use strict';\n\nconst eventProxy = {\n  onObj: {},\n  oneObj: {},\n  on: function(key, fn) {\n    if(this.onObj[key] === undefined) {\n      this.onObj[key] = [];\n    }\n\n    this.onObj[key].push(fn);\n  },\n  one: function(key, fn) {\n    if(this.oneObj[key] === undefined) {\n      this.oneObj[key] = [];\n    }\n\n    this.oneObj[key].push(fn);\n  },\n  off: function(key) {\n    this.onObj[key] = [];\n    this.oneObj[key] = [];\n  },\n  trigger: function() {\n    let key, args;\n    if(arguments.length == 0) {\n      return false;\n    }\n    key = arguments[0];\n    args = [].concat(Array.prototype.slice.call(arguments, 1));\n\n    if(this.onObj[key] !== undefined\n      && this.onObj[key].length > 0) {\n      for(let i in this.onObj[key]) {\n        this.onObj[key][i].apply(null, args);\n      }\n    }\n    if(this.oneObj[key] !== undefined\n      && this.oneObj[key].length > 0) {\n      for(let i in this.oneObj[key]) {\n        this.oneObj[key][i].apply(null, args);\n        this.oneObj[key][i] = undefined;\n      }\n      this.oneObj[key] = [];\n    }\n  }\n};\n\nexport default eventProxy;","import eventProxy from \"../eventProxy.js\"\nlet React = require('react');\n\n\n//let node = [], link = [];  用不上\n//let selectLink;\n\n\n//关于显示代码：此组件作为消息订阅者!\nclass GraphTable extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            tab: 1,\n            code:'',\n            actions:[]\n        };\n        this.SELECTED_LINK_COLOR = \"#ff0000\";\n        this.DEFAULT_LINK_COLOR = \"#3a6bdb\";\n        this.onShowCode=this.onShowCode.bind(this);  //绑定消息监听函数\n        this.onShowAction=this.onShowAction.bind(this);  //如果你不绑定方法，那么在事件发生并且精确调用这个方法时，方法内部的this会丢失指向。\n    }\n   \n    render(){\n        let content = this.setContent(this.props); //props继承自panel，而panel的props来自App\n        return ( \n            <div style={{width: '100%', height:'100%'}}>\n                <div id=\"tab\">\n                    <div style={{backgroundColor:this.state.tab===1?\"#999\":\"#CCC\"}} onClick={this.setPTab.bind(this)}>顶点</div>\n                    <div style={{backgroundColor:this.state.tab===2?\"#999\":\"#CCC\"}} onClick={this.setLTab.bind(this)}>边</div>\n                    <div style={{backgroundColor:this.state.tab===3?\"#999\":\"#CCC\"}} onClick={this.setMatrixTab.bind(this)}>矩阵</div>\n                    <div style={{backgroundColor:this.state.tab===4?\"#999\":\"#CCC\"}} onClick={this.setCodeTab.bind(this)}>代码</div>\n                    <div style={{backgroundColor:this.state.tab===5?\"#999\":\"#CCC\"}} onClick={this.setActionTab.bind(this)}>动作</div>\n                </div>\n                <div id=\"tabContent\">{content}</div>\n            </div>\n        );\n    }\n\n    ///当GraphSVG组件传递代码过来时，调整tab状态，使其处于代码显示栏，同时更新代码\n    onShowCode(code){  \n        //this.setState({tab:4});  //更新tab状态则会自动跳转到代码栏\n        this.setState({code:code});\n    }\n\n    onShowAction(actions)\n    {\n        //this.setState({tab:5});\n        this.setState({actions:actions});\n    }\n    \n    componentDidMount(){\n        eventProxy.on(window.showCode,this.onShowCode);     //window.showCode见index.js\n        eventProxy.on(window.showAction,this.onShowAction);  \n    }\n\n    //点击“顶点”\n    setPTab(){\n        this.setState({\n            tab: 1\n        });\n    }\n    //点击“边”\n    setLTab(){\n        this.setState({\n            tab: 2\n        });\n    }\n\n    //点击\"矩阵\"\n    setMatrixTab()\n    {\n        this.setState({\n            tab:3\n        });\n    }\n\n    //点击“代码”\n    setCodeTab(){\n        this.setState({\n            tab:4\n        });\n    }\n\n    //点击\"动作\"\n    setActionTab()\n    {\n        this.setState({\n            tab:5\n        });\n    }\n\n    //点击菜单后渲染\n    setContent( {node, link} ){\n        switch(this.state.tab){\n            case 1:\n                //顶点\n                return this.renderPoint(node);\n                break;\n            case 2:\n                //边\n                return this.renderLink(link);\n                break;\n            case 3:\n                return this.renderMatrix(node,link);\n                break;\n            case 4:\n                return this.renderCode();\n                break;\n            case 5:\n                return this.renderAction();\n                break;\n        }\n        return \"ERROR\";\n    }\n\n    renderPoint(nodes){\n        let td = nodes.map(node=>{\n            return (\n                <tr key={node.name}>\n                    <td>{node.name}</td>\n                    <td>{node.lng}</td>\n                    <td>{node.lat}</td>\n                </tr>\n            );\n        });\n        return (\n            <table>\n                <thead>\n                    <tr>\n                        <th>地点</th>\n                        <th>经度</th>\n                        <th>纬度</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {td}\n                </tbody>\n            </table>\n        );\n    }\n    renderLink(links){     //index应该是link元素在links中的索引\n        let td = links.map((link, index)=>{\n            let ifVisible = link.polyline.isVisible();\n            let color = link.polyline.getStrokeColor();\n            let ifHighlight = color === this.SELECTED_LINK_COLOR;\n\n            return (\n                <tr key={link+\"-\"+index} onClick={this.highlightLink(link).bind(this)} style={{backgroundColor:ifHighlight?\"#DDD\":\"#FFF\"}}>\n                    <td>{link.node1.name+\" -> \"+link.node2.name}</td>\n                    <td>{link.dis}</td>\n                    <td onClick={this.setLink(link).bind(this)}>{ifVisible?\"Yes\":\"No\"}</td>\n                </tr>\n            );\n        });\n\n        return (\n            <table>\n                <thead>\n                    <tr>\n                        <th>路线</th>\n                        <th>距离</th>\n                        <th>选择</th>\n                    </tr> \n                </thead>\n                <tbody>\n                    {td}\n                </tbody>\n            </table>\n        );\n    }\n   \n\n    renderMatrix(nodes,links)\n    {\n        const nodataGrid=<th></th>;               //空格\n        let horizonMatrxHead=nodes.map(node=>{　　//第一排表头\n                return(\n                    <th>{node.name}</th>\n                );\n        });\n        let maxtrixContent=nodes.map(node=>{     //表格内容\n            let headName=<th>{node.name}</th>;\n        \n            let name1=node.name;\n            let dists=nodes.map(node=>{\n                let dist;\n                let flag=0;\n                for(var i=0;i<links.length;i++)\n                {\n                    if(links[i].polyline.isVisible() && (name1==links[i].node1.name && node.name==links[i].node2.name)||(name1==links[i].node2.name && node.name==links[i].node1.name))\n                    {\n                        dist=links[i].dis;\n                        flag=1;\n                    }\n                }\n                if(flag==1)                //两个点相连\n                    return(\n                        <td align=\"center\">{dist}</td>\n                    );\n                else\n                        return(\n                            <td align=\"center\">∞</td>\n                        );\n            });\n            return(\n                <tr>\n                {headName}\n                {dists}\n                </tr>\n            );\n        });\n\n        return(\n            <table>\n              {nodataGrid} \n              {horizonMatrxHead}\n              {maxtrixContent}\n            </table>\n        );\n    }\n\n    renderCode(){     //渲染代码，使用layer  (iframe高度无法使用相对高度，应为tabContent的限制)\n        return(\n            <textarea   cols=\"80\" rows=\"30\" value={this.state.code} autoFocus readOnly></textarea>\n        );\n    }\n   \n    renderAction()\n    {\n        let actions=this.state.actions;           //因为actions中有重复的动作，因此下面需要key(index)加以区分！\n        console.log(actions);\n        let actionContent=actions.map((action,index)=>{\n            return(\n               <tr key={index}>\n                   <td align=\"center\">\n                    {action}\n                   </td>\n               </tr>\n            );\n        });\n        return(\n            <table >\n                {actionContent}\n            </table>\n        );\n    }\n\n    highlightLink(link){\n        return function(event){\n            let links = this.props.link;\n            links.forEach(l=>{\n                l.polyline.setStrokeColor(this.DEFAULT_LINK_COLOR);\n            });\n            link.polyline.setStrokeColor(this.SELECTED_LINK_COLOR);\n            this.props.updateState(null, links);\n        }\n    }\n\n    setLink(link){\n        return function(event){\n            let links = this.props.link;\n            let visible = link.polyline.isVisible();\n\n            if(visible)\n                link.polyline.hide();\n            else \n                link.polyline.show();\n\n            this.props.updateState(null, links);\n        }\n    }\n}\n\nexport default GraphTable;","//import d3 from './d3.v4.min.js';\n//window.d3 = d3;\n//import $ from 'jquery';  //引入jquery\nimport Graph from \"./Graph.js\";\nimport MyMenu from \"../MyMenu.js\";\nimport eventProxy from \"../eventProxy.js\"\nimport { assertFunctionParent } from \"babel-types\";\nrequire('../../assets/play.png');\nrequire('../../assets/pause.png');\nlet React = require('react');\n\n\n//readme: 学长的代码中node的改变是通过state.S_NODE实现，edge(颜色)的改变是通过this.props.link实现!!!!!\n//经补充修改后，边上路径长度的改变通过state.S_EDGE实现\n   \n//import stepData from \"./testData.js\";\nlet $=window.jQuery;\nlet stepData = null;\nlet _name = [];     //存储点名\n//let STEP_COUNT = 0;　　　//学长以STEP_COUNT记录每一个动作的编号（是动作不是帧！！）->改为每一帧的编号\nlet actionStep={};        //用于存储步骤动作信息,eg:   {3:[3,4,5,6]}表示第三帧包含动作3、4、５、６\nlet STEP_COUNT=1;         //全局记录当前演示的帧数\nwindow.question = true;\n\nclass GraphSVG extends React.Component{\n    //其属性来自Panel...this.pros的传递,包括updtaState、node、link\n    constructor(props){\n        super(props);\n        this.state = {};\n\n        //注意：关于点、边的颜色\n        //ＤＦＳ后台传递的颜色：初始化边表示（１０，１０，１０），初始点表示(91,155,2１3),选中点边表示（255,0,0）\n        //DJ后台传递颜色:初始化边（１０，１０，１０），初始化点（９１，１５５，２１３），\n\n        this.DEFAULT_LINK_COLOR = \"#3a6bdb\";  //默认是(浅蓝色)\n        this.INITIAL_LINK_COLOR = \"#0a0a0a\";   //初始化后边的颜色\n        this.INITIAL_NODE_COLOR = \"#5B9BD5\";  //初始化后点的颜色\n        this.SELECTED_LINK_COLOR = \"#ff0000\";   //选中的边，红色\n        this.SELECTED_NODE_COLOR = \"#ff0000\";   //选中的点     \n       \n        //this.path = null;\n\n        this.state.speed = 0.5;\n        this.state.play = \"stop\";\n        this.state.start = \"\";\n        this.state.end = \"\";\n        this.state.S_NODE = new Map(); //更新点的颜色;　　　　　　　　　Map是一组键值对的结构，具有极快的查找速度(误以为是Map.js导出的Map类)\n        this.state.S_EDGE = new Map();  //更新边的距离\n        this.state.question= true;\n        this.state.S_NODE_DIS=new Map(); //更新点到起点的距离\n        this.state.S_NODE_INFO=new Map(); //更新点旁边的其他信息，如显示不等式\n    }\n\n    render(){\n        this.clcMaxMin();\n        let nodes = this.renderNode();\n        let links = this.renderLink();\n\n        let controlstate = this.state.play===\"play\"?\"pauseState\":\"playState\";\n\n        return (\n            <div id=\"graphWrap\">\n                <div id=\"main\">\n                    <div style={{width:\"100%\", height:\"100%\", backgroundColor:\"#FFF\"}}>\n                        <svg ref=\"graph\" width=\"100%\" height=\"100%\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" onContextMenu={(e)=>{e.preventDefault();}}>\n                            {links}\n                            {nodes}\n                        </svg>\n                    </div>\n                </div>\n                <div id=\"tool\">\n                    <div id=\"question\"> 提问 <input id=\"question_checkbox\" type=\"checkbox\" checked={this.state.question} onChange={this.checkChange.bind(this)}/> </div>\n                    <div id=\"speed\" title=\"速度\" onClick={this.changeSpeed.bind(this)}>\n                        <div id=\"speedValue\" style={{width: this.state.speed*100+\"%\"}}></div>\n                    </div>\n                    <div id=\"prev\" title=\"上一步\" onClick={this.animate_back.bind(this)}></div>\n                    <div id=\"start\" title=\"开始/暂停\" className={controlstate} onClick={this.play.bind(this)}></div>\n                    <div id=\"next\" title=\"下一步\" onClick={this.animate_forward.bind(this)}></div>\n                    <div id=\"end\" title=\"结束\" onClick={this.stop.bind(this)}></div>\n                    <div id=\"reset\" title=\"复位\" onClick={this.reSet.bind(this)}></div>\n                </div>\n            </div>\n        );\n    }\n\n    //右上角全部复位！\n    reSet()\n    {    //复位！\n        stepData = null;\n        _name = [];     //存储点名\n        actionStep={};        //用于存储步骤动作信息,eg:   {3:[3,4,5,6]}表示第三帧包含动作3、4、５、６\n        STEP_COUNT=1;         //全局记录当前演示的帧数\n        window.question = true;\n\n        this.resetColor();\n\n        this.state.speed = 0.5;\n        this.state.play = \"stop\";\n        this.state.start = \"\";\n        this.state.end = \"\";\n        this.state.S_NODE = new Map(); //更新点的颜色;　　　　　　　　　Map是一组键值对的结构，具有极快的查找速度(误以为是Map.js导出的Map类)\n        this.state.S_EDGE = new Map();  //更新边的距离\n        this.state.question= true;\n        this.state.S_NODE_DIS=new Map(); //更新点到起点的距离\n        this.state.S_NODE_INFO=new Map(); //更新点旁边的其他信息，如显示不等式\n    }\n    //是否提问状态改变\n    checkChange(e){\n        window.question = e.target.checked;\n        console.log(window.question);\n        this.setState({question: !this.state.question});\n    }\n\n    clcMaxMin(){\n        let max_lng = -Infinity, min_lng = Infinity;\n        let max_lat = -Infinity, min_lat = Infinity;\n\n        this.mid_lng = 0;\n        this.mid_lat = 0;\n\n        this.props.node.forEach(node=>{\n            if(node.lat>max_lat)max_lat = node.lat;\n            if(node.lat<min_lat)min_lat = node.lat;\n\n            if(node.lng>max_lng)max_lng = node.lng;\n            if(node.lng<min_lng)min_lng = node.lng;\n            \n            this.mid_lng += node.lng;\n            this.mid_lat += node.lat;\n        });\n\n        this.max_lng = max_lng;\n        this.min_lng = min_lng;\n\n        this.max_lat = max_lat;\n        this.min_lat = min_lat;\n\n        this.mid_lng /= this.props.node.length;\n        this.mid_lat /= this.props.node.length;\n    }\n\n    clcCoordinate(lng, lat){\n        let w = this.refs.graph.clientWidth;\n        let h = this.refs.graph.clientHeight;\n\n        let margin = 50;\n\n        // w = (w-margin - margin)/(this.max_lat-this.min_lat + 0.001)*(lat-this.min_lat) + margin;\n        // h = h - ( (h-margin - margin)/(this.max_lng-this.min_lng + 0.001)*(lng-this.min_lng) + margin ) ;\n\n        w = (w-margin - margin)/(this.max_lng-this.min_lng + 0.001)*(lng-this.min_lng) + margin;\n        h = h - ( (h-margin - margin)/(this.max_lat-this.min_lat + 0.001)*(lat-this.min_lat) + margin ) ;\n\n        return [w, h];\n    }\n\n    renderNode(){\n        let nodes = this.props.node;\n        let svg = nodes.map(node=>{\n            let [x, y] = this.clcCoordinate(node.lng, node.lat);\n            let name = node.name;\n            let setSE = this.setSE.bind(this);\n            let color = null;\n            let distance='';\n            let info='';  //显示不等式\n\n            if(this.state.start===node.name){\n                color = \"#CCFFFF\";\n            }\n             if(this.state.end===node.name){\n                color = \"#CC6699\";\n            }\n            if(this.state.S_NODE.has(node.name)){\n                color = this.state.S_NODE.get(node.name);\n            }\n            if(this.state.S_NODE_DIS.has(node.name)){\n                distance=this.state.S_NODE_DIS.get(node.name);\n            }\n            if(this.state.S_NODE_INFO.has(node.name)){\n                info=this.state.S_NODE_INFO.get(node.name);\n            }\n            let data = {name, x, y, setSE, color,distance,info};   //把data作为属性传递给Node\n            return ( <Node key={\"node\"+node.name} {...data}/> );   //Node类在此脚本末尾！\n            //react利用key来识别组件，它是一种身份标识标识,与props中的属性不同！！！\n        });\n        return svg;\n    }\n\n    renderLink(){\n        let links = this.props.link;\n        let svg = links.map(link=>{\n            if(!link.polyline.isVisible())return;\n            let [x1, y1] = this.clcCoordinate(link.node1.lng, link.node1.lat);\n            let [x2, y2] = this.clcCoordinate(link.node2.lng, link.node2.lat);\n            let s = {\n                name: link.node1.name,\n                x: x1,\n                y: y1,\n            };\n            let e = {\n                name: link.node2.name,\n                x: x2,\n                y: y2,\n            };\n            let color = link.polyline.getStrokeColor();\n            let dis='';  //边的长度\n            for(var edge of this.state.S_EDGE){\n                if((link.node1.name===edge[1][0]&&link.node2.name===edge[1][1])||(link.node1.name===edge[1][1]&&link.node2.name===edge[1][0])){\n                    dis=edge[0]; //距离赋值\n                    break;\n                }\n            }\n           \n            console.log(color, link);\n            return ( <Link key={\"link-\"+s.name+\"-\"+e.name} from={s.name} to={e.name} x1={s.x} y1={s.y} x2={e.x} y2={e.y} color={color} distance={dis}/> );\n        });\n        return svg;\n    }\n\n    changeSpeed(event){\n        let p = (event.clientX - this.getLeft(event.target)) / event.target.clientWidth;\n        console.log(p);\n        this.setState({speed: p});\n    }\n\n    play(event){\n        if(this.state.play===\"stop\"){\n            this.setState({play: \"play\"});\n            clearTimeout(window.timer);\n            this.go();           //go()包含了初始化以及animate\n            \n        }else if(this.state.play===\"pause\"){\n            this.setState({play: \"play\"});\n            this.animate();     //继续执行\n\n        }else if(this.state.play===\"play\"){\n\n            this.setState({play: \"pause\"});\n            clearTimeout(window.timer);  //暂停,取消计时器他就不再执行（但是所有状态都保存着<最重要是STEP_COUNT>，下次继续animate即可继续执行）\n\n        }\n    }\n\n    stop(){\n        clearTimeout(window.timer);\n        actionStep.STEP_COUNT = 1;\n        this.setState({play: \"stop\", start: \"\", end: \"\"});\n         /* global layer */\n        layer.msg(\"结束\");\n    }\n\n    //消息发布，用于组件间传递代码信息!\n    codeChangeHandler(code){\n        eventProxy.trigger(window.showCode,code);\n    }\n    actionGetHandler(actions){\n        eventProxy.trigger(window.showAction,actions);\n    }\n\n    //执行（包括数据传递给C++以及根据C++回传数据显示），会调用animate\n    go(){\n        if(!this.state.start || !this.state.end){\n            this.setState({play:\"stop\"});\n            return this.stop();\n        };\n\n        var that = this;   //this对象在程序中随时会改变，而var that=this之后，that没改变之前仍然是指向当时的this，这样就不会出现找不到原来的对象。\n\n        var edgeIn = [];\n        var pointIn = [];\n        var globalIn = [];\n\n\n        _name = [];       //存储点的名字\n\n        this.props.node.forEach(node=>{  //提取每个点的经度、维度、编号并存储在pointIn中(C++程序需要输入的点信息)\n            _name.push(node.name);\n            let lng = parseInt(node.lng);\n            let lat = parseInt(node.lat);\n            let index = '*'+(_name.length-1)+'*'\n            pointIn.push([index, lng, lat]);\n        });\n        pointIn = JSON.stringify(pointIn);\n\n        var start_index = '*'+(_name.findIndex(v=>v===this.state.start))+'*';  //找到起点、终点的编号\n        var end_index = '*'+(_name.findIndex(v=>v===this.state.end))+'*';\n\n\n        globalIn.push([pointIn.length]);     //globalIn代表C++程序输入的参数：点数、？\n        globalIn.push([-1000, 1000]);\n        globalIn.push([1000, -1000]);\n        globalIn = JSON.stringify(globalIn);\n\n        \n        that.resetColor();\n        let S_NODE = new Map();\n        let S_EDGE = new Map();\n        let S_NODE_DIS=new Map();\n        let S_NODE_INFO=new Map();\n        this.setState({S_NODE, S_EDGE,S_NODE_DIS,S_NODE_INFO});  //向 setState() 中传入一个对象来对已有的 state 进行更新。\n\n\n        this.props.link.forEach(link=>{        //整理edgeIn(编号、编号、距离),作为C++程序传入参数\n            if(!link.polyline.isVisible())return;\n            let n1 = '*'+_name.findIndex(v=>v===link.node1.name)+'*';\n            let n2 = '*'+_name.findIndex(v=>v===link.node2.name)+'*';\n                edgeIn.push([n1, n2, parseFloat(link.dis, 10)]);\n        });\n        edgeIn = JSON.stringify(edgeIn);\n//////////////////////////////////////////////////////\n        window.layer.load(1, {shade: [0.4,'#fff']});\n        $.ajax({\n            type:\"POST\",\n            //url:\"http://localhost:3001/data\",\n            url:\"/data\",\n            data:{edgeIn:edgeIn,pointIn:pointIn,globalIn:globalIn,sName:start_index,eName:end_index,algo:window.algo},\n            success: function(json){\n                //console.log(_name);\n                //console.log({start_index, end_index});\n                //console.log(json);\n                // //stepData包括code、steps  //stepData是C++计算传回的数据,根据stepData,前端做出相应动作\n                stepData = json;  //steps的数据是各个动作的含义，比如：\tchangeNodeColor(2,RGB(255,0,0))\tAnimation\t8\n                layer.closeAll();\n                \n                let actions=[];\n                //先读一遍数据，记录每一帧对应的动作编号，便于快进、返回;   同时记录动作内容，用于组件通信\n                for(var i=0;i<stepData.steps.length-1;i++){  //暂未搞懂为什么多了一条动作？？？\n                    //得到该动作对应帧的编号\n                    var stepTemp=stepData.steps[i].split('\\t')[3];    \n                    if(stepData.steps[i].split('\\t')[1].split('(')[0]===\"Question\"){ //question动作的帧编号位置不同!\n                        stepTemp=stepData.steps[i].split('\\t')[7];\n                    }\n\n                    //将该动作编号纳入帧编号\n                    if(stepTemp in actionStep)\n                        actionStep[stepTemp].push(i);\n                    else{\n                        actionStep[stepTemp]=[];\n                        actionStep[stepTemp].push(i);\n                    }\n                    actions.push(stepData.steps[i].split('\\t')[1]);   //存储动作内容\n                }\n                that.actionGetHandler(actions);                            //动作内容传递给Graphtable组件           \n\n                // 开始动画\n                that.animate();   //不能用this，因为ajax中的this已经不在代表外面的组件了!!!\n            },\n            error: function(){\n                layer.closeAll();\n                layer.msg(\"出错, 提交失败\");\n            }\n        });\n//////////////////////////////////////////////////////\n\n        // that.animate();\n\n    }\n\n    //执行动画\n    //注意：当Question、showHelp、showCode时，之所以return是为了结束当前函数，不再执行当前函数末尾的animate\n    //因为在else if中会使用layer，内部接着使用了setTimeout和animate继续下去\n    animate(){\n        // if(this.state.play!==\"play\")return;\n        //setTimeout(code,millisec), code是要执行的代码，lillisec是遇到setTimer后要等待多少毫秒才执行code!\n        //返回数值id，整型，可用于 取消 setTimeout 设置的函数clearTimeout(id)。也就是这个setTimeout的唯一标示符\n        window.timer = setTimeout(()=>{\n\n            let step = this.getStep(STEP_COUNT);  //获取一帧的全部数据\n            layer.closeAll();\n            STEP_COUNT++;\n            if(step===null){\n                this.stop();\n                return;\n            }\n            let links = this.props.link;  //将要更新的元素\n            let S_NODE = this.state.S_NODE;\n            let S_EDGE=this.state.S_EDGE;\n            let S_NODE_DIS=this.state.S_NODE_DIS;\n            let S_NODE_INFO=this.state.S_NODE_INFO;\n\n            for(var i=0;i<step.types.length;i++){\n                if(step.types[i]===\"changeEdgeColor\"){\n                    let params = step.infos[i][1].split(\"(\")[1].split(\",\");\n                    params.pop();\n                    let color = step.infos[i][1].split(\"RGB\")[1];\n                    color = this.chooseColor(color);\n                \n                    //改变边的颜色\n                    let name1 = _name[parseInt(params[0])];\n                    let name2 = _name[parseInt(params[1])];\n                    links.forEach(link=>{\n                        if(link.polyline.isVisible()){\n                            if((link.node1.name===name1&&link.node2.name===name2)||(link.node1.name===name2&&link.node2.name===name1)){\n                                link.polyline.setStrokeColor(color);\n                            }\n                        }\n                    });\n                    //this.props.updateState(null, links);\n                }\n                else if(step.types[i]===\"changeNodeColor\"){\n                    let idx = step.infos[i][1].split(\"(\")[1].split(\",\")[0];\n                    idx = parseInt(idx);\n                    let color = step.infos[i][1].split(\"RGB\")[1];\n                    color = this.chooseColor(color);\n                    let name = _name[idx];  //找到编号对应的点名\n                    S_NODE.set(name,color);  //S_NODE是键值对，改变name对应点的状态\n                    //this.setState({S_NODE});\n                }\n                else if(step.types[i]===\"changeEdgeLength\"){\n                    //\"20\tchangeEdgeLength(0,1,1173)\tAnimation\t2\";\n                    var params=step.infos[i][1].split('(')[1].split(')')[0].split(','); //获取点编号、边距离\n                    let name1 = _name[parseInt(params[0])];  //起点编号\n                    let name2 = _name[parseInt(params[1])];　\n                   let dis=parseFloat(params[2]);\n                   S_EDGE.set(dis,[name1,name2]);\n                \n                }\n                else if(step.types[i]===\"changeNodeDist\"){\n                    var params=step.infos[i][1].split('(')[1].split(')')[0].split(',');\n                    let idx=parseInt(params[0]);  //点的编号\n                    let distance=parseFloat(params[1]);\n                    let name=_name[idx];   //点名\n                    S_NODE_DIS.set(name,distance);\n                }\n                else if(step.types[i]===\"showCode\"){\n                    var that=this;\n                    var param=step.infos[i][1].split('(')[1].split(')')[0];\n                    var codeName=\"code\"+param+\".txt\";\n                    $.ajax({\n                        type:\"POST\",\n                        //url:\"http://localhost:3001/code\",\n                        url:\"/code\",\n                        data:{codeName:codeName},\n                        success: function(code){\n                        that.codeChangeHandler(code);   //不能用this，因为ajax中的this已经不在代表外面的组件了!!!???\n                        },\n                        error: function(){\n                            console.log('获取代码失败！');\n                        }\n                    });\n                }\n                else if(step.types[i]===\"showHelp\"){\n                    let msg = step.infos[i][1].split(\"(\")[1].split(\")\")[0];\n                    layer.msg(msg, {time: this.state.speed *3000 +70});   \n                }\n                else if(step.types[i]===\"Question\" && window.question){\n                    let que = step.infos[i][2];\n                    if(que[0]===\"*\")                    //打个补丁，针对dijkstra提问为：*1*在本次循环后到起点的距离为？　的情况\n                    {\n                       que=que.replace(/\\*/g,\"\");\n                       que=que.replace(que[0],_name[que[0]]);\n                    }\n                    let ans = step.infos[i][3];   \n                    if(ans[0]===\"*\"){                    //标准答案，返回的是 *2* 类型\n                        ans = ans.replace(/\\*/g, \"\");\n                        ans = _name[ans];\n                        return this.ask(que, ans);   \n                    }\n                    else                                //答案不只一个地点(默认１０个和以内),数字转化为文字路径\n                    {\n                        if(Object.is(window.algo,\"dijkstra\"))      //dj数字答案直接返回\n                            return this.ask(que,ans);\n                        let pathNum=parseInt(ans);\n                        let path_num=[];\n                        let ans_length=ans.length;\n                        while(ans_length>=1)\n                        {\n                            path_num.push(pathNum%10);\n                            pathNum=parseInt(pathNum/10);   //js竟然不能整除!!!\n                            ans_length--;\n                        }\n\n                        let path_str;\n                        for(let i=path_num.length-1;i>=0;i--)\n                        {\n                            if(i==path_num.length-1)\n                                path_str=_name[path_num[i]]+\"->\";\n                            else if(i==0)   \n                                path_str=path_str+_name[path_num[i]];\n                            else\n                                path_str=path_str+_name[path_num[i]]+\"->\";\n\n                        }\n                        return this.ask(que,path_str);\n                    }\n                 \n                }\n                else if(step.types[i]===\"showInequality\"){\n                    var params=step.infos[i][1].split('(')[1].split(')')[0].split(',');\n                    let idx=parseInt(params[0]);  //点的编号\n                    let info=params[1];\n                    let name=_name[idx];   //点名\n                    S_NODE_INFO.set(name,info);\n                }\n                else if(step.types[i]===\"InequalityDisapper\"){\n                    var params=step.infos[i][1].split('(')[1].split(')')[0].split(',');\n                    let idx=parseInt(params[0]);  //点的编号\n                    let info='';  //将信息（不等式）置空\n                    let name=_name[idx];   //点名\n                    S_NODE_INFO.set(name,info);\n                }\n                \n            }\n\n            //对一帧中的各元素统一进行刷新\n            this.props.updateState(null, links);\n            //this.setState({S_NODE});\n            //this.setState({S_EDGE});\n            //this.setState({S_NODE_DIS});\n            //this.setState({S_NODE_INFO});\n            this.setState({S_NODE,S_EDGE,S_NODE_DIS,S_NODE_INFO});\n            this.animate();  //重复执行\n\n        }, this.state.speed *3000 +70);\n    \n    }\n\n   \n    //学长原来是获取每一个动作信息－>此处改为获取每一个步骤(帧)的信息\n    getStep(nStep){\n\n        console.log(\"get step:\"+nStep); //读取一帧的数据\n\n        var types=new Array(); //创建数组，用于保存动作信息\n        var infos=new Array(); \n\n        if(nStep in actionStep){\n            for(var i=0;i<actionStep[nStep].length;i++){\n                let info = stepData.steps[actionStep[nStep][i]].split('\\t');  //第ACTION_COUNT条动作信息(作为数组保存在info)                  \n                let type = info[1].split('(')[0];   //info[1]代表动作的解释：changeNodeColor(4,RGB(91,155,213))；  则type对应changeNodeColor\n                types.push(type);\n                infos.push(info);\n            }\n            return {types, infos};  //返回对象，对象的属性是键值对\n        }\n        return null;\n  \n    }\n\n    chooseColor(color){\n        switch(color){\n            case \"(10,10,10))\": return this.INITIAL_LINK_COLOR;   //初始化边（接近黑色）\n            case \"(91,155,213))\": return this.INITIAL_NODE_COLOR; //初始化点（接近蓝色)\n            case \"(255,0,0))\": return this.SELECTED_LINK_COLOR;    //选中点、边（红色）\n            default: return \"#000000\";\n        }\n    }\n\n    checkLink(link, name1, name2){\n        let node1 = link.node1;\n        let node2 = link.node2;\n        if( (node1.name===name1 && node2.name===name2) || (node1.name===name2 && node2.name===name1) ){\n            return true;\n        }\n        return false;\n    }\n\n    //重置link颜色\n    resetColor(){\n        let links = this.props.link;\n        links.forEach(link=>{\n            if(link.polyline.isVisible())\n                link.polyline.setStrokeColor(this.DEFAULT_LINK_COLOR); \n        });\n        this.props.updateState(null, links);\n    }\n\n    /*获取元素的横坐标*/\n    getLeft(e){\n        var offset=e.offsetLeft;\n        if(e.offsetParent!=null){\n        offset+=this.getLeft(e.offsetParent);\n        } \n        return offset;\n    } \n\n    //设置起点终点\n    setSE(event){\n        event.preventDefault();\n        event.stopPropagation();\n        let that = this;\n        let name = event.target.attributes.id.value.split(\"_\").pop();\n\t\t/*\n\t\tlet menu = new nw.Menu();\n\t\tmenu.append(new nw.MenuItem({\n\t\t\tlabel: '设为起点',\n\t\t\tclick: function(){\n                that.setState({start: name});\n\t\t\t}\n\t\t}));\n\t\tmenu.append(new nw.MenuItem({\n\t\t\tlabel: '设为终点',\n\t\t\tclick: function(){\n                that.setState({end: name});\n\t\t\t}\n\t\t}));\n\t\tmenu.popup(event.clientX, event.clientY);*/\n\t\tlet menu = new MyMenu(\"MyMenu_Node_SVG\");\n\t\tmenu.append([{\n\t\t\tlabel: '设为起点',\n\t\t\tclick: function(){\n                that.setState({start: name});\n\t\t\t}\n        },{\n\t\t\tlabel: '设为终点',\n\t\t\tclick: function(){\n                that.setState({end: name});\n\t\t\t}\n        }]);\n        menu.popup(event.clientX, event.clientY);\n\t\t\n\t\treturn false;\n    }\n\n    //提问\n    ask(que, msg){             //msg是标准答案(转换后的)\n        clearTimeout(window.timer);\n        let that = this;\n        window.layer.prompt({title: que}, function(text, index){\n            layer.closeAll();\n            if(text!=msg){\n                window.layer.msg('正确答案：'+msg, {time: 1000});\n                ///////////////////////////////////////////////////////\n                $.ajax({\n                    type:\"POST\",\n                    url:\"/collect\",\n                    data:{que:que,ans:text,msg:msg},\n                    success: function(json){\n                    },\n                    error: function(){\n                    }\n                });\n        ///////////////////////////////////////////////////////\n                setTimeout(()=>{\n                    that.animate();\n                }, 1100);\n            }else{\n                window.layer.msg('答对了！', {time: 1000});\n                that.animate();\n            }\n        } );\n    }\n\n  \n\n   //**************************************************** by cdz\n    //执行动作：根据STEP_COUNT执行！！！\n    //注意：当Question、showHelp、showCode时，之所以return是为了结束当前函数，不再执行当前函数末尾的animate\n    //因为在else if中会使用layer，内部接着使用了setTimeout和animate继续下去\n\n\n   //倒退:为了减少不必要的理解错误，只能倒退到点和边初始化完成以后\n   animate_back(){\n    //不管处于什么状态，都使其暂停\n    this.setState({play: \"pause\"});\n    clearTimeout(window.timer);\n    layer.closeAll();\n   \n\n    STEP_COUNT--;\n    let back_step = this.getStep(STEP_COUNT);              //获取上一帧的信息\n    if(back_step===null){\n        this.stop();\n        return;\n    }\n\n    let links = this.props.link;                          //将要更新的元素\n    let S_NODE = this.state.S_NODE;\n    let S_EDGE=this.state.S_EDGE;\n    let S_NODE_DIS=this.state.S_NODE_DIS;\n    let S_NODE_INFO=this.state.S_NODE_INFO;\n\n    for(var i=0;i<back_step.types.length;i++){           //扫描一帧的内容\n        console.log(back_step.infos[i])\n        if(back_step.types[i]===\"changeEdgeColor\"){\n            let params = back_step.infos[i][1].split(\"(\")[1].split(\",\");\n            params.pop();\n            //let color =back_step.infos[i][1].split(\"RGB\")[1];\n            let color = this.INITIAL_LINK_COLOR;                //状态返回，即后退\n            \n            //改变边的颜色\n            let name1 = _name[parseInt(params[0])];\n            let name2 = _name[parseInt(params[1])];\n            links.forEach(link=>{\n                if(link.polyline.isVisible()){\n                    if((link.node1.name===name1&&link.node2.name===name2)||(link.node1.name===name2&&link.node2.name===name1)){\n                        link.polyline.setStrokeColor(color);\n                    }\n                }\n             });\n                //this.props.updateState(null, links);\n            }\n        else if(back_step.types[i]===\"changeNodeColor\"){\n            let idx = back_step.infos[i][1].split(\"(\")[1].split(\",\")[0];\n            idx = parseInt(idx);\n            //let color = back_step.infos[i][1].split(\"RGB\")[1];\n            let color = this.INITIAL_NODE_COLOR;\n            let name = _name[idx];  //找到编号对应的点名\n            S_NODE.set(name,color);  //S_NODE是键值对，改变name对应点的状态\n            //this.setState({S_NODE});\n            }\n\n        else if(back_step.types[i]===\"changeEdgeLength\"){\n            //\"20\tchangeEdgeLength(0,1,1173)\tAnimation\t2\";\n            var params=back_step.infos[i][1].split('(')[1].split(')')[0].split(','); //获取点编号、边距离\n            let name1 = _name[parseInt(params[0])];  //起点编号\n            let name2 = _name[parseInt(params[1])];　\n            let dis=parseFloat(params[2]);\n             S_EDGE.set(dis,[name1,name2]); \n        }\n         else if(back_step.types[i]===\"changeNodeDist\"){\n            var params=back_step.infos[i][1].split('(')[1].split(')')[0].split(',');\n            let idx=parseInt(params[0]);  //点的编号\n            let distance=parseFloat(params[1]);\n            let name=_name[idx];   //点名\n            S_NODE_DIS.set(name,distance);\n        }\n        else if(back_step.types[i]===\"showCode\"){\n            var that=this;\n            var param=back_step.infos[i][1].split('(')[1].split(')')[0];\n            var codeName=\"code\"+param+\".txt\";\n            $.ajax({\n                    type:\"POST\",\n                    //url:\"http://localhost:3001/code\",\n                    url:\"/code\",\n                    data:{codeName:codeName},\n                    success: function(code){\n                    that.codeChangeHandler(code);   //不能用this，因为ajax中的this已经不在代表外面的组件了!!!???\n                    },\n                    error: function(){\n                        console.log('获取代码失败！');\n                    }\n            });\n        }\n        else if(back_step.types[i]===\"showHelp\"){\n            let msg =back_step.infos[i][1].split(\"(\")[1].split(\")\")[0];\n            layer.msg(msg, {time: this.state.speed *3000000 +70});  //无限停留\n        }\n        else if(back_step.types[i]===\"Question\" && window.question){\n            let que = back_step.infos[i][2];\n             let ans = back_step.infos[i][3];\n             if(ans[0]===\"*\"){\n                 ans = ans.replace(/\\*/g, \"\");\n                 ans = _name[ans];\n             }\n            return this.ask(que, ans);   \n        }\n         else if(back_step.types[i]===\"showInequality\"){\n            var params=back_step.infos[i][1].split('(')[1].split(')')[0].split(',');\n            let idx=parseInt(params[0]);  //点的编号\n            let info=params[1];\n            let name=_name[idx];   //点名\n            S_NODE_INFO.set(name,info);\n         }\n         else if(back_step.types[i]===\"InequalityDisapper\"){\n            var params=back_step.infos[i][1].split('(')[1].split(')')[0].split(',');\n            let idx=parseInt(params[0]);  //点的编号\n            let info='';  //将信息（不等式）置空\n            let name=_name[idx];   //点名\n            S_NODE_INFO.set(name,info);\n        }\n            \n    }\n    //对一帧中的各元素统一进行刷新\n    this.props.updateState(null, links);\n    //this.setState({S_NODE});\n    //this.setState({S_EDGE});\n    //this.setState({S_NODE_DIS});\n    //this.setState({S_NODE_INFO});\n    this.setState({S_NODE,S_EDGE,S_NODE_DIS,S_NODE_INFO});\n}\n\n    \n   //前进\n   animate_forward(){\n        //不管处于什么状态，都使其暂停\n    this.setState({play: \"pause\"});\n    clearTimeout(window.timer);\n    layer.closeAll();\n\n    STEP_COUNT++;\n    let forward_step = this.getStep(STEP_COUNT);\n    if(forward_step===null){\n        this.stop();\n        return;\n    }\n\n    let links = this.props.link;  //将要更新的元素\n    let S_NODE = this.state.S_NODE;\n    let S_EDGE=this.state.S_EDGE;\n    let S_NODE_DIS=this.state.S_NODE_DIS;\n    let S_NODE_INFO=this.state.S_NODE_INFO;\n\n    for(var i=0;i<forward_step.types.length;i++){\n        if(forward_step.types[i]===\"changeEdgeColor\"){\n            let params = forward_step.infos[i][1].split(\"(\")[1].split(\",\");\n            params.pop();\n            let color =forward_step.infos[i][1].split(\"RGB\")[1];\n            color = this.chooseColor(color);\n            \n            //改变边的颜色\n            let name1 = _name[parseInt(params[0])];\n            let name2 = _name[parseInt(params[1])];\n            links.forEach(link=>{\n                if(link.polyline.isVisible()){\n                    if((link.node1.name===name1&&link.node2.name===name2)||(link.node1.name===name2&&link.node2.name===name1)){\n                        link.polyline.setStrokeColor(color);\n                    }\n                }\n             });\n                //this.props.updateState(null, links);\n            }\n        else if(forward_step.types[i]===\"changeNodeColor\"){\n            let idx = forward_step.infos[i][1].split(\"(\")[1].split(\",\")[0];\n            idx = parseInt(idx);\n            let color =forward_step.infos[i][1].split(\"RGB\")[1];\n            color = this.chooseColor(color);\n            let name = _name[idx];  //找到编号对应的点名\n            S_NODE.set(name,color);  //S_NODE是键值对，改变name对应点的状态\n            //this.setState({S_NODE});\n            }\n        else if(forward_step.types[i]===\"changeEdgeLength\"){\n            //\"20\tchangeEdgeLength(0,1,1173)\tAnimation\t2\";\n            var params=forward_step.infos[i][1].split('(')[1].split(')')[0].split(','); //获取点编号、边距离\n            let name1 = _name[parseInt(params[0])];  //起点编号\n            let name2 = _name[parseInt(params[1])];　\n            let dis=parseFloat(params[2]);\n             S_EDGE.set(dis,[name1,name2]); \n        }\n         else if(forward_step.types[i]===\"changeNodeDist\"){\n            var params=forward_step.infos[i][1].split('(')[1].split(')')[0].split(',');\n            let idx=parseInt(params[0]);  //点的编号\n            let distance=parseFloat(params[1]);\n            let name=_name[idx];   //点名\n            S_NODE_DIS.set(name,distance);\n        }\n        else if(forward_step.types[i]===\"showCode\"){\n            var that=this;\n            var param=forward_step.infos[i][1].split('(')[1].split(')')[0];\n            var codeName=\"code\"+param+\".txt\";\n            $.ajax({\n                    type:\"POST\",\n                    //url:\"http://localhost:3001/code\",\n                    url:\"/code\",\n                    data:{codeName:codeName},\n                    success: function(code){\n                    that.codeChangeHandler(code);   //不能用this，因为ajax中的this已经不在代表外面的组件了!!!???\n                    },\n                    error: function(){\n                        console.log('获取代码失败！');\n                    }\n            });\n        }\n        else if(forward_step.types[i]===\"showHelp\"){\n            let msg =forward_step.infos[i][1].split(\"(\")[1].split(\")\")[0];\n            layer.msg(msg, {time: this.state.speed *300000 +70});  //无限停留\n        }\n        else if(forward_step.types[i]===\"Question\" && window.question){\n            let que = forward_step.infos[i][2];\n             let ans = forward_step.infos[i][3];\n             if(ans[0]===\"*\"){\n                 ans = ans.replace(/\\*/g, \"\");\n                 ans = _name[ans];\n             }\n            return this.ask(que, ans);   \n        }\n         else if(forward_step.types[i]===\"showInequality\"){\n            var params=forward_step.infos[i][1].split('(')[1].split(')')[0].split(',');\n            let idx=parseInt(params[0]);  //点的编号\n            let info=params[1];\n            let name=_name[idx];   //点名\n            S_NODE_INFO.set(name,info);\n         }\n         else if(forward_step.types[i]===\"InequalityDisapper\"){\n            var params=forward_step.infos[i][1].split('(')[1].split(')')[0].split(',');\n            let idx=parseInt(params[0]);  //点的编号\n            let info='';  //将信息（不等式）置空\n            let name=_name[idx];   //点名\n            S_NODE_INFO.set(name,info);\n        }\n            \n    }\n    //对一帧中的各元素统一进行刷新\n    this.props.updateState(null, links);\n    //this.setState({S_NODE});\n    //this.setState({S_EDGE});\n    //this.setState({S_NODE_DIS});\n    //this.setState({S_NODE_INFO});\n    this.setState({S_NODE,S_EDGE,S_NODE_DIS,S_NODE_INFO});\n\n\n}\n\n}\n\n\nclass Node extends React.Component{\n    constructor(props){\n        super(props);\n        this.SELECT_COLOR = \"#300\";\n        this.DEFAULT_COLOR = \"#3C9\";\n    }\n\n    //<g>元素通常用来对相关图形元素进行分组\n    //onContextMenu：对应右击鼠标的响应事件\n    render(){\n        return (\n            <g id={\"node_\"+this.props.name} onContextMenu={this.props.setSE}>\n                <circle id={\"node_circle_\"+this.props.name} cx={this.props.x} cy={this.props.y} r={this.props.r || 20} fill={this.props.color ||　this.DEFAULT_COLOR}></circle>\n                <text id={\"node_text_\"+this.props.name} x={this.props.x} y={this.props.y} fill=\"black\" textAnchor=\"middle\" dominantBaseline=\"middle\" style={{fontSize: \"13px\"}}>{this.props.hide || this.props.name}</text>\n                <text id={\"node_value\"+this.props.name} x={this.props.x} y={this.props.y+10} fill=\"black\" textAnchor=\"middle\" dominantBaseline=\"middle\" fontSize='13px' fill='blue'>{this.props.distance}</text>\n                <text id={\"node_value\"+this.props.name} x={this.props.x+40} y={this.props.y-5} fill=\"black\" textAnchor=\"middle\" dominantBaseline=\"middle\" fontSize='13px' fill='black'>{this.props.info}</text>\n            </g>\n        );\n    }\n    hover(event){\n        console.log(event.target.attributes.fill);\n        console.log(event.target.attributes);\n        let attributes = event.target.attributes;\n    }\n}\n\nclass Link extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.SELECT_COLOR = \"#900\";\n        this.DEFAULT_COLOR = this.props.color;\n    }\n    render(){\n        this.DEFAULT_COLOR = this.props.color;\n         return (\n            <g id={\"link_\"+this.props.from+\"_\"+this.props.to}>\n                 <line x1={this.props.x1} y1={this.props.y1} x2={this.props.x2} y2={this.props.y2} stroke={this.props.color} strokeWidth=\"5\" style={{cursor: \"pointer\"}} onMouseEnter={this.hover.bind(this)} onMouseLeave={this.hover.bind(this)}/>\n                 <text x={(this.props.x1+this.props.x2)/2} y={(this.props.y1+this.props.y2)/2}  style={{fontSize:\"15px\"}}>{this.props.distance}</text>\n             </g>\n        );\n    }\n    hover(event){\n        let attributes = event.target.attributes;\n        attributes.stroke.value===this.SELECT_COLOR ? attributes.stroke.value=this.DEFAULT_COLOR : attributes.stroke.value=this.SELECT_COLOR;\n    }\n}\n\nexport default GraphSVG;","import GraphTable from \"./GraphTable.js\";\nimport GraphSVG from \"./GraphSVG.js\";\n\nlet React = require(\"react\");\nclass Panel extends React.Component{\n\n    //参考index.js知Panel的属性包括updataState、node、link\n    //由render中...this.props知，这几个属性还会传递给GraphSVG   GraphTable\n    constructor(props){\n        super(props);\n        \n        this.MARGIN_RIGHT = 600;\n        this.LEFT = 10;\n\n        this.state = {\n            left: -this.LEFT,\n            marginRight: -this.MARGIN_RIGHT\n        };\n    }\n\n    \n    //注：　...this.props，props提供的语法糖，可以将父组件中的所有属性复制给子组件\n    render(){\n        return (\n            <div id=\"panel\" style={{marginRight: this.state.marginRight+\"px\"}}>\n                <div id=\"graph\"> \n                    <GraphSVG {...this.props}/>\n                </div>  \n                <div id=\"table\">\n                    <GraphTable {...this.props}/>\n                </div>\n                <div className=\"drawer\" style={{left: this.state.left+\"px\"}} onClick={this.close.bind(this)}></div>\n            </div>\n        );\n    }\n    //关闭右栏\n    close(){\n        if(this.state.left!==0){\n            this.setState({\n                left: 0,\n                marginRight: 0\n            });\n        }else{\n            this.setState({\n                left: -this.LEFT,\n                marginRight: -this.MARGIN_RIGHT\n            });\n        }\n    }\n}\n\nexport default Panel;","import * as serviceWorker from './serviceWorker';\n\n//引入三个组件  \nimport Map from \"./app/component/Map.js\";   \nimport Sidebar from \"./app/component/Sidebar.js\";\nimport Panel from \"./app/component/Panel.js\";\n\nimport MyMenu from \"./app/MyMenu.js\";\n\n\n//引入jQuery  (换到了html中引入)\n//let $ = require(\"jquery\");\n//window.$ = $;\n//window.jQuery = $;\n\n//引入自定义样式\nrequire(\"./css/map.new.css\");\n\n//引入layer.js\n//require(\"./app/layer/skin/default/layer.css\");\n//let layer = require(\"./app/layer/layer.js\");\n//window.layer = layer;\n\n//引入React\nlet React = require(\"react\");\nlet ReactDOM = require(\"react-dom\");\n\nwindow.MyMenu = MyMenu;\nwindow.showCode=\"showCode\";          //组件间消息传递的标志\nwindow.showAction=\"showAction\";\n\nclass APP extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            node: [],\n            link: []\n        };\n    }\n    render(){\n        return (\n            <div id=\"container\">\n                <Sidebar updateState={this.updateState.bind(this)} node={this.state.node} link={this.state.link}/>\n                <Map updateState={this.updateState.bind(this)} node={this.state.node} link={this.state.link}/>\n                <Panel updateState={this.updateState.bind(this)} node={this.state.node} link={this.state.link}/>\n            </div>\n        );\n    }\n    /**\n     * 更新node和link的回调函数\n     * @param {*} node \n     * @param {*} link \n     */\n    updateState(node, link){\n        let oldNode = this.state.node;\n        let oldLink = this.state.link;\n        this.setState({\n            node: node || oldNode,  //当结果为真时，返回第一个为真的值\n            link: link || oldLink\n        });\n    }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nReactDOM.render(<APP />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}